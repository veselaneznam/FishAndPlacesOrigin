H.util.eval("N.prototype.P=ca(0,function(a){var b=this.g,c,d=this;a!==z?(C(a,og,N.prototype.P,0),c=a):c=vg;c!==b&&b.Ba(function(a,b,g){return d.o(a)?(c.add(a,b,g),!0):!1});this.g=c});function nl(a,b){return a!==B?a:b}function ol(a){for(var b=Object.keys(a),c=b.length,d;c--;)d=a[b[c]],ra(d)&&ol(d);return Ka(a)}function T(a,b,c,d,e,f){if(a&&b)this.ae(a),this.kd(b),this.gc(c),this.j(e),this.l(f),this.uf(d);else throw Error('Parameters \"scheme\" and \"host\" must be specified');}u(\"H.service.Url\",T);\nfunction pl(a,b){var c=a,d=x.document,e,f,g,h,k=d&&d.createElement(\"a\"),l=\"\";d?(b&&(f=(e=d.getElementsByTagName(\"base\")[0])&&e.href,g=d.head,h=e||g.appendChild(d.createElement(\"base\")),h.href=b),k.href=c,l=k.href,b&&(e?e.href=f:g.removeChild(h))):/[\\w]+:\\/\\//.test(c)&&(l=c);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(l);c=g[1];k=g[4];d=g[5];h=g[6];e=g[7];f=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split(\"@\")[1]);g=k;h=h&&0<h.length?h.substr(1):\"\";var k=\n{},n;if(e)for(l=/([?&]?([^=&+]+))(=([^&]+))?/g;n=l.exec(e);)k[decodeURIComponent(n[2])]=n[4]?decodeURIComponent(n[4]):void 0;return new T(c,g,h,k,isNaN(+d)?void 0:+d,f&&0<f.length?f.substr(1):\"\")}T.parse=pl;var ql=0;T.prototype.clone=function(){ql++;var a={},b;for(b in this.b)a[b]=this.b[b];return new T(this.g,this.rc,this.c,a,this.f,this.a)};T.prototype.clone=T.prototype.clone;\nT.prototype.ae=function(a){if(!a||\"string\"!==typeof a)throw Error('The \"scheme\" parameter must be a non-empty string.');this.g=a;return this};T.prototype.setScheme=T.prototype.ae;T.prototype.C=function(){return this.g};T.prototype.getScheme=T.prototype.C;T.prototype.kd=function(a){if(!a||\"string\"!==typeof a||\"-\"===a.charAt(0)||\".\"===a.charAt(0)||\".\"===a.charAt(a.length-1))throw Error('The \"host\" parameter is not a valid host name.');this.rc=a;return this};T.prototype.setHost=T.prototype.kd;\nT.prototype.s=function(){return this.rc};T.prototype.getHost=T.prototype.s;T.prototype.gc=function(a){this.c=a||void 0;return this};T.prototype.setPath=T.prototype.gc;T.prototype.o=function(){return this.c};T.prototype.getPath=T.prototype.o;T.prototype.uf=function(a){if(a)if(\"object\"==typeof a)this.b=a;else throw Error('Parameter \"params\" must be an object.');else this.b={};return this};T.prototype.setQuery=T.prototype.uf;T.prototype.i=function(){return!rl(this)};T.prototype.hasQuery=T.prototype.i;\nT.prototype.u=function(){return this.b};T.prototype.getQuery=T.prototype.u;T.prototype.j=function(a){if(a&&isNaN(parseInt(a,10)))throw Error('Parameter \"port\" must be a number or undefined');this.f=+a||void 0;return this};T.prototype.setPort=T.prototype.j;T.prototype.A=function(){return this.f};T.prototype.getPort=T.prototype.A;T.prototype.l=function(a){this.a=a||void 0;return this};T.prototype.setAnchor=T.prototype.l;T.prototype.B=function(){return this.a};T.prototype.getAnchor=T.prototype.B;\nT.prototype.T=function(a){if(\"object\"!==typeof a)throw Error('Parameter \"other\" must be an object.');var b=this.b,c;for(c in a)a.hasOwnProperty(c)&&\"function\"!==typeof a[c]&&(b[c]=a[c]);return this};T.prototype.mergeQuery=T.prototype.T;T.prototype.ya=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subDomain\" must be a non-empty string');\".\"===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.kd(a+\".\"+this.rc)};T.prototype.addSubDomain=T.prototype.ya;\nT.prototype.O=function(a){if(!a||\"string\"!==typeof a)throw Error('Parameter \"subPath\" must be a non-empty string');return this.gc((this.c?this.c+\"/\":\"\")+a)};T.prototype.addSubPath=T.prototype.O;T.prototype.toString=function(){return[this.g+\"://\",this.rc,this.f?\":\"+this.f:\"\",this.c||!rl(this)||this.a?\"/\":\"\",this.c?encodeURI(this.c):\"\",sl(this),this.a?\"#\"+encodeURIComponent(this.a):\"\"].join(\"\")};T.prototype.toString=T.prototype.toString;\nfunction sl(a){var b=[],c,d=a.b,e;for(c in d)d.hasOwnProperty(c)&&\"function\"!==typeof d[c]&&(e=a.b[c],b.push(encodeURIComponent(c)+(void 0===e?\"\":\"=\"+encodeURIComponent(e))));return 0<b.length?\"?\"+b.join(\"&\"):\"\"}function rl(a){var b,c=0;for(b in a.b)if(a.b.hasOwnProperty(b)&&\"function\"!==typeof a.b[b]&&(c++,0<c))break;return!c};function tl(a){function b(b){d.removeChild(e);l&&clearTimeout(l);delete tl.a[f];b&&a.Wc&&a.Wc.call(k,b)}if(!a.url||!a.ic)throw Error('Parameter \"options\" must specify at least a URL and a callback.');if(\"function\"!==typeof a.ic)throw Error(\"Parmaters options.callback must be a function\");var c=a.zi||document,d=c.getElementsByTagName(\"head\")[0],e=c.createElement(\"script\"),c=a.url instanceof T?a.url:pl(a.url,a.yi),f=tl.c++,g=a.td||\"callback\",h=a.ic,k={},l=null;k.id=f;k.cancel=function(){b(\"cancelled\")};\n0!==a.timeout&&(l=x.setTimeout(function(){b(\"timeout\")},a.timeout||3E4));tl.a[f]=function(a){b();h.call(k,a)};e.type=\"text/javascript\";e.src=c.toString()+(c.i()?\"&\":\"?\")+g+\"=\"+(a.mf?\"H.service.jsonp.handleResponse(\"+f+\")\":encodeURI(\"H.service.jsonp.handleResponse(\"+f+\")\"));d.appendChild(e);return k}u(\"H.service.jsonp\",tl);tl.b=function(a){return(a=tl.a[a])?a:function(){}};tl.handleResponse=tl.b;tl.c=0;tl.a={};function ul(a){a=a||{};this.g=a.subDomain;this.c=a.path;this.l=a.callbackKey;this.b=a.baseUrl}u(\"H.service.AbstractRestService\",ul);ul.prototype.aa=function(a,b,c,d,e){this.a=(e||this.b).clone();this.g&&this.a.ya(this.g);this.c&&this.a.gc(this.c);c&&this.a.ae(\"https\");return this};ul.prototype.configure=ul.prototype.aa;ul.prototype.V=function(){return this.a};\nul.prototype.pa=function(a,b,c){if(!q(b))throw Error(\"onResult callback needed\");if(!q(c))throw Error(\"onError callback needed\");return tl({url:a,ic:function(a){b(a)},Wc:function(b){c(Error(\"[\"+b+\"] \"+a+\" request failed\"))},td:this.l})};function U(a){a=vl(wl,a);this.A(a.baseUrl);this.c(a.useCIT);this.g(a.useHTTPS);xl(this,a.app_id,a.app_code);this.a={}}u(\"H.service.Platform\",U);function xl(a,b,c){a.l=b;a.i=c;a.f.T({app_id:b,app_code:c})}U.prototype.aa=function(a){if(a.configure)return a.configure(this.l,this.i,this.C,this.u,this.f);throw Error(\"Object is not configurable\");};U.prototype.configure=U.prototype.aa;U.prototype.g=function(a){this.C=a;this.f.ae(a?\"https\":\"http\")};U.prototype.setUseHTTPS=U.prototype.g;\nU.prototype.c=function(a){this.u=a;this.f.kd((a?\"cit.\":\"\")+this.B)};U.prototype.setUseCIT=U.prototype.c;U.prototype.A=function(a){this.B=a.rc;this.f=a=a.clone();a.T({xnlp:\"CL_JSMv3.\"+vk().version});this.c(this.u);this.g(this.C);xl(this,this.l,this.i)};U.prototype.setBaseUrl=U.prototype.A;U.prototype.D=function(){return this.f};U.prototype.getBaseUrl=U.prototype.D;var wl={app_id:null,app_code:null,useHTTPS:!1,useCIT:!1,baseUrl:new T(\"http\",\"api.here.com\")};\nu(\"H.service.setOptions\",function(a,b){wl[a]=b});u(\"H.service.getOptions\",function(a){return wl[a]});function vl(a,b){var c=b||{},d;for(d in a)!a.hasOwnProperty(d)||d in c||(c[d]=a[d]),b&&b.hasOwnProperty(d)&&(c[d]=b[d]);return c};function yl(a){a=vl(wl.trafficIncidents,a);a.callbackKey=\"jsoncallback\";yl.v.constructor.call(this,a)}w(yl,ul);u(\"H.service.TrafficIncidentsService\",yl);yl.prototype.aa=function(a,b,c,d,e){yl.v.aa.apply(this,[a,b,c,d,e]);this.b&&(this.a=this.b.clone());return this};yl.prototype.configure=yl.prototype.aa;yl.prototype.i=function(a,b,c){a=this.V().clone().O(\"incidents.json\").T(a);return this.pa(a,b,c)};yl.prototype.requestIncidents=yl.prototype.i;\nyl.prototype.f=function(a,b,c,d,e,f){a=this.V().clone().O([\"incidents/json\",c,a,b].join(\"/\")).T(f||{});return this.pa(a,d,e)};yl.prototype.requestIncidentsByTile=yl.prototype.f;wl.trafficIncidents={subDomain:\"traffic\",path:\"traffic/6.1\"};U.prototype.s=function(){return this.aa(new yl)};U.prototype.getTrafficIncidentsService=U.prototype.s;function zl(){this.Af={}}function Al(a){var b,c=a.boxes,d,e;this.label=a.label;this.min=a.minLevel;this.max=a.maxLevel;this.b=[];if(c&&(b=c.length))for(d=c[0],e=new F(d[0],d[1],d[2],d[3]),this.b.push(e),this.a=new F(d[0],d[1],d[2],d[3]),a=1;a<b;a++)d=c[a],e=new F(d[0],d[1],d[2],d[3]),this.b.push(e),this.a.sb(e,!1,this.a)}Al.prototype.tc=function(a,b){var c;if(a>=this.min&&a<=this.max)if((c=this.b.length)&&this.a){if(this.a.tc(b))for(;c--;)if(this.b[c].tc(b))return!0}else return!0;return!1};function Bl(a){var b=0,c,d,e=a.length;if(0===e)return b;for(c=0;c<e;c++)d=a.charCodeAt(c),b=(b<<5)-b+d,b|=0;return b}var Cl=Function(\"return this\")();function Dl(a,b){function c(){k=ya();ke.font=g;h=Math.round(ke.measureText(\"BESbswyMi\").width);-1===e.indexOf(h)?b():3E5<k-d?b(\"timeout\"):(l=50*++f,Cl.setTimeout(c,Math.min(l,d+3E5-k)))}var d=ya(),e=El(),f=0,g=\"35px \"+a+\",\"+Fl.join(\",\"),h,k,l;-1!==Fl.indexOf(a)?b():Cl.setTimeout(c,50)}\nfunction Gl(a,b){function c(a){a?b(a):0===--d&&b()}var d=a.length;a.forEach(function(a){Dl(a,c)})}var Fl=Ma(\"monospace serif\");function El(){var a=[];Fl.forEach(function(b){ke.font=\"35px \"+b;a.push(Math.round(ke.measureText(\"BESbswyMi\").width))});return a}function Hl(a,b){var c=b||document,d=c.createElement(\"style\"),e;d.appendChild(c.createTextNode(\"\"));c.head.appendChild(d);e=d.sheet;a.forEach(function(a,b){e.insertRule(a,b)});return d}function Il(){}\nIl.prototype.pop=function(a){this[a]||(this[a]=[]);return this[a].pop()||Cl.document.createElement(\"canvas\")};Il.prototype.push=function(a,b){this[b]||(this[b]=[]);this[b].push(a)};var Jl=new Il;function Kl(a,b,c,d,e,f,g){var h=this;g=g||{};f=f?f:{};var k=a.V().clone().O(b+\"/\"+a.yb()+\"/\"+c).T(f),l=a.i;this.service_=a;this.tileBaseUrl_=k;Nj.call(this,{tileSize:d,max:512===d?19:20,min:512===d?2:0,getURL:function(a,b,c){var f=h.tileBaseUrl_.clone();l&&f.ya(l[(c+b+a)%l.length]);f.O(c+\"/\"+a+\"/\"+b+\"/\"+d+\"/\"+e);return f.toString()},crossOrigin:g.crossOrigin,uri:k.toString().replace(/_/g,\"\")+d});this.tileType_=b;this.scheme_=c;this.params_=f;this.copyrightKey_=c.split(\".\")[0];this.D=A(this.D,this);\nthis.getCopyrights=this.Ea;this.W=mc();a.addEventListener(\"versionupdate\",this.D)}w(Kl,Nj);Kl.prototype.MAX_STORE_TIME=2592E6;Kl.prototype.F=function(){Nj.prototype.F.call(this);this.service_.removeEventListener(\"versionupdate\",this.D)};Kl.prototype.Ea=function(a,b){var c=this.service_.Ea().Af[this.copyrightKey_],d,e=c?c.length:0,f=[];for(d=0;d<e;d++)c[d].tc(b,a)&&f.push(c[d]);return f};\nKl.prototype.D=function(){var a=this.service_;this.tileBaseUrl_=a.V().clone().O(this.tileType_+\"/\"+a.yb()+\"/\"+this.scheme_).T(this.params_);this.j(!1)};Kl.prototype.Pc=function(){return this.W};u(\"H.service.MapTileProvider.prototype.canStore\",Kl.prototype.Pc);Kl.prototype.C=function(){return this.Pc()?lc():N.prototype.C.call(this)};u(\"H.service.MapTileProvider.prototype.getStorage\",Kl.prototype.C);function Ll(a){a=vl(wl.maptile,a);G.call(this);this.f=a.baseUrl;this.c=a.path;this.o=a.subDomain;this.i=a.shards;this.ra=(this.u=!!a.ignoreTypes)?null:a.type;this.g=a.version;this.j=new zl;this.s={};this.wd=0}w(Ll,G);u(\"H.service.MapTileService\",Ll);function Ml(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}\nLl.prototype.aa=function(a,b,c,d,e){this.a=(this.f||e).clone();this.o&&this.a.ya(this.o);this.ra&&this.a.ya(this.ra);this.c&&this.a.gc(this.c);\"newest\"===this.g&&Nl(this);return this};Ll.prototype.configure=Ll.prototype.aa;Ll.prototype.V=function(){return this.a};Ll.prototype.B=function(){return this.ra};Ll.prototype.getType=Ll.prototype.B;Ll.prototype.yb=function(){return this.g};Ll.prototype.getVersion=Ll.prototype.yb;\nLl.prototype.Ea=function(){this.wd||(this.g&&\"newest\"!==this.g||\"traffic\"===this.ra)&&Ol(this);return this.j};Ll.prototype.getCopyrights=Ll.prototype.Ea;\nfunction Nl(a){var b=a.V().clone().O(\"info\").T({output:\"json\"});a.i&&b.ya(a.i[0]);tl({url:b,td:\"callback_func\",ic:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Ml(b,\"map\");Ml(b,\"scheme\");Ml(b,\"tiletype\");Ml(b,\"format\");Ml(b,\"resolution\");Ml(b,\"language\");if(\"newest\"===a.g&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.g=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Wc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @ \"+\nb.toString());},mf:!0})}function Ol(a){var b=a.V().clone().O(\"copyright\").O(a.yb()).T({output:\"json\"});a.i&&b.ya(a.i[0]);a.wd=1;tl({url:b,td:\"callback_func\",ic:function(b){this.wd=2;b=JSON.parse(b);var d=a.j,e;for(e in b)if(b.hasOwnProperty(e))for(var f=b[e],g=d.Af[e]||(d.Af[e]=[]),h=void 0,k=f.length,h=0;h<k;h++)g.push(new Al(f[h]));a.dispatchEvent(\"copyrightupdate\")},Wc:function(a){this.wd=-1;throw Error(\"[\"+a+\"]: Could not fetch copyrights from map tile service @\"+b.toString());},mf:!0})}\nLl.prototype.C=function(){return this.l};Ll.prototype.getInfo=Ll.prototype.C;Ll.prototype.A=function(a,b,c,d,e,f){var g;g=Bl(this.V().clone().O(a+\"/\"+this.yb()+\"/\"+b+\"/\"+c+\"/\"+d).T(e?e:{}).toString());var h=this.s[g];h||(h=new Kl(this,a,b,c,d,e,f),this.s[g]=h);return h};Ll.prototype.createTileProvider=Ll.prototype.A;Ll.prototype.b=function(a,b,c,d,e,f,g,h){a=this.A(a,b,c,d,e,h);return new Hg(a,{opacity:f,dark:!!g})};Ll.prototype.createTileLayer=Ll.prototype.b;\nwl.maptile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};U.prototype.b=function(a){var b;b=vl(wl.maptile,a);var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=Bl(c);c=this.a[b];c||(c=this.aa(new Ll(a)),this.a[b]=c);return c};U.prototype.getMapTileService=U.prototype.b;function Pl(a){this.f=a;this.cb=this.a(\"general\",\"default\")||Ql;this.c=new og(200)}Pl.prototype.b=function(a,b){var c,d,e,f,g;for(g=1;g<arguments.length;g++)for(c in d=arguments[g],d)if(d.hasOwnProperty(c))for(e in a[c]||(a[c]={}),f=d[c],f)f.hasOwnProperty(e)&&void 0!==f[e]&&(a[c][e]=f[e]);return a};Pl.prototype.Na=function(a,b){var c=this.a(\"spaceToGroup\",b);return Rl(this,a,c?c+\"\":void 0)};\nfunction Rl(a,b,c){var d,e,f;f=(b?b+\"_\":\"\")+(c?c:\"default\");d=a.cb;(e=a.c.get(f))?d=e:(b&&c?(d=Rl(a,b,void 0),e=Rl(a,void 0,c),b=a.a(\"venues\",b,\"groups\",c),d=a.b({},a.cb,d,e,b)):b&&!c?d=a.b({},a.cb,a.a(\"venues\",b,\"default\")):!b&&c&&(d=a.b({},a.cb,a.a(\"general\",\"groups\",c))),a.c.add(f,d,1));return d}Pl.prototype.a=function(a){for(var b=this.f,c=arguments,d=c.length,e=0;e!==d;)if(b=b[c[e++]],!b)return;return b};\nvar Ql={space:{fillColor:\"rgba(198, 175, 255, .7)\",strokeColor:\"rgb(162, 141, 216)\",lineWidth:.5},spaceLabel:{fillColor:\"rgb(78,66,111)\"},floor:{fillColor:\"rgba(249, 244, 253, .7)\",strokeColor:\"rgba(255, 255, 255, .7)\",lineWidth:1}};function Sl(a,b,c,d,e,f,g,h){this.P=[];this.B={};Vj.call(this,a,b,c,d,e,f,g,h)}w(Sl,Vj);function Tl(){}Tl.prototype.fc=function(){};u(\"H.service.remote.IObject.prototype.retain\",Tl.prototype.fc);Tl.prototype.s=function(){};u(\"H.service.remote.IObject.prototype.release\",Tl.prototype.s);function Ul(a,b){var c={};this.I=a;Aa(c,b||c);Ej.call(this,c);this.dc={};Vl(this)}w(Ul,Ej);u(\"H.service.remote.ObjectProvider\",Ul);Ul.prototype.K=function(){Ej.prototype.K.call(this)};function Vl(a){a=a.P(Fe.SPATIAL);a.c(a.a+1,Ce.ADD)}var Wl=[];Ul.prototype.s=function(){return Wl};Ul.prototype.requestMarkers=Ul.prototype.s;Ul.prototype.j=function(){return Wl};Ul.prototype.requestDomMarkers=Ul.prototype.j;Ul.prototype.l=re;Ul.prototype.providesMarkers=Ul.prototype.l;Ul.prototype.i=re;\nUl.prototype.providesDomMarkers=Ul.prototype.i;Ul.prototype.u=function(){return!0};Ul.prototype.providesSpatials=Ul.prototype.u;Ul.prototype.o=function(){return Wl};Ul.prototype.requestSpatials=Ul.prototype.o;function Xl(a){return a.getVisibility(!0)}Ul.prototype.c=function(a,b){var c=Yl(this,a,Zl);b&&(c=c.filter(Xl));return c};Ul.prototype.requestSpatialsByTile=Ul.prototype.c;function Yl(a,b,c){var d=b.i&&b.i[c],e;!d&&(e=b.o)&&(delete b.o,(b.i=a=a.I.parse(a,b,e))&&(d=a[c]));return d||Wl}\nUl.prototype.U=function(a){var b=a.sa();if(this.dc[b])throw new ac(this.U,\"Remote object \"+b+\" already added\");return this.dc[b]=a};Ul.prototype.a=function(a){delete this.dc[a.sa()]};var Zl=\"spatials\";function $l(a,b,c){Ul.call(this,b,c);this.b=a;this.responseQueue_=[];am(this.b)||(this.Td=A(this.Td,this),this.b.addEventListener(\"statechange\",this.Td));this.A=a.o;this.f=0;this.C={onSpaceCreated:c&&c.onSpaceCreated,floorLevel:0,styler:null};this.requestSpatialsByTile=A(this.c,this)}w($l,Ul);$l.prototype.S=function(a,b,c,d){this.qf?this.Lg.apply(this,arguments):d||this.responseQueue_.push({di:a,response:c,Ah:b});d&&(a.B[b]=!0)};function bm(a){return a.getVisibility(!0)}\n$l.prototype.c=function(a,b,c){var d;this.Rg||cm(this);d=a.a;b&&(d=d.filter(bm));if(!c){b=this.f;var e,f,g,h;if(!a.B[b]&&am(this.b)){e=this.b.V();c=a.x;f=a.y;h=g=a.z;for(var k=1,l;h--;)l=1<<h,k*=4,k+=(c&l&&1)|(f&l&&2);h=k.toString(4).substr(1);e=e.clone().O(\"0/tiles-ia\").O(\"L\"+b).O(h+\".json\");this.A&&e.ya(this.A[(c+f+g)%this.A.length]);c=new Zg(\"text/plain\",e.toString());c.then(A(this.S,this,a,b),ic);a.B[b]=!0}a.B[this.f]=!0}a.l&&(d=d.concat(a.l),delete a.l);return d};\nu(\"H.service.venues.ObjectProvider.prototype.requestSpatialsByTile\",$l.prototype.c);p=$l.prototype;p.Gc=function(a){var b,c,d;for(b in this.dc)for(c in d=this.dc[b].D,d)d[c].Gc(a);Vl(this);kg(this);this.f=a};p.Lg=function(a,b,c,d){if(!d&&(this.C.floorLevel=b,b=(b=this.I.parse(this,a,c,this.C))&&b.spatials))for(a.l=a.l?a.l.concat(b):b,a=b.length;a--;)b[a].va(Ce.ADD)};p.Td=function(){am(this.b)&&(dm(this),this.b.removeEventListener(\"statechange\",this.Td))};\nfunction dm(a){am(a.b)&&a.qf&&a.dispatchEvent(\"reload\")}function cm(a){a.Rg=!0;em(a,function(b,c){c?a.dispatchEvent(\"error\"):(a.C.styler=b,fm(a,A(a.Vh,a)))})}p.Vh=function(a){a?this.dispatchEvent(\"error\"):(this.responseQueue_.forEach(function(a){this.Lg(a.di,a.Ah,a.response)},this),this.responseQueue_=null,this.qf=!0,dm(this))};p.Rg=!1;p.qf=!1;function em(a,b){(new Zg(\"application/json\",a.b.l.clone().O(\"styles/styles.json\").toString())).then(function(a){b(new Pl(a))},function(a){b(null,a)})}\nvar gm=0;\nfunction fm(a,b){var c=a.b.l.clone().O(\"fonts\"),d=document,e=[],f,g=[];2===gm?b():(hm.forEach(function(a){g.push(\"nokiapuretext{name}_rg-webfont\".replace(\"{name}\",a))}),1!==gm&&(hm.forEach(function(a,b){f=c.clone().O(g[b]);e.push('@font-face {font-family: \"nokiapuretext{name}_rg-webfont\";src: url(\"{url}.woff2\") format(\"woff2\"),url(\"{url}.woff\") format(\"woff\"),url(\"{url}.ttf\") format(\"truetype\");font-weight: normal;font-style: normal;}'.replace(/\\{name\\}/g,a).replace(/\\{url\\}/g,f.toString()))}),a.B=\nHl(e,d),gm=1),Gl(g,function(c){gm=c?0:2;c&&a.B&&we(a.B);b(c)}))}var hm=Ma(\"inn2 dflt in insl as me\");function im(a,b,c,d){Q.call(this,jm(a));this.j=c;this.g=d;this.s={};this.Pa=b;this.c=0}w(im,Q);u(\"H.service.venues.Building\",im);im.prototype.sa=function(){return this.Pa};im.prototype.getId=im.prototype.sa;im.prototype.xa=function(){return this.za};im.prototype.getVenue=im.prototype.xa;im.prototype.na=function(){return this.j};im.prototype.getMinLevel=im.prototype.na;im.prototype.Oa=function(){return this.g};im.prototype.getMaxLevel=im.prototype.Oa;im.prototype.Ja=function(){return this.c};\nim.prototype.getCurrentLevel=im.prototype.Ja;im.prototype.Gc=function(a){var b,c,d;if(!isNaN(a)&&(b=this.j,c=this.g,a!==this.c))for(this.c=a;b<=c;b++)(d=this.s[b])&&d.setVisibility(b===a);return this.c};im.prototype.Yc=function(a){return this.s[a]};im.prototype.getFloor=im.prototype.Yc;im.prototype.S=function(a,b){this.j=Math.min(this.j,a);this.g=Math.max(this.g,b)};im.prototype.adjustMinMaxLevels=im.prototype.S;function km(a,b){Q.call(this,jm(a));this.D={};this.g=b;a.U(this)}w(km,Q);u(\"H.service.venues.Venue\",km);km.prototype.P=function(a){return this.D[a]};km.prototype.getBuilding=km.prototype.P;km.prototype.c=function(){return this.D};km.prototype.getBuildings=km.prototype.c;km.prototype.sa=function(){return this.g};km.prototype.getId=km.prototype.sa;function lm(a,b,c,d){d=d||mm;this.ec={};d.provider=a;this.invalidate=ic;lm.v.constructor.call(this,b,d);delete this.invalidate;c&&(this.g=c);this.va(Ce.ADD)}w(lm,cf);u(\"H.service.remote.Spatial\",lm);var mm={};lm.prototype.sa=function(){return this.g||cf.prototype.sa.call(this)};lm.prototype.getId=lm.prototype.sa;lm.prototype.fc=Function();lm.prototype.retain=lm.prototype.fc;lm.prototype.s=Function();lm.prototype.release=lm.prototype.s;\nfunction nm(a,b,c){this.b=a;c&&(this.c=c);0<=b&&(this.a=b)}nm.prototype.a=-1;var om=new nm([]);lm.prototype.Yb=function(a){return(this.ec[a.key]||om).b};lm.prototype.getGeometry=lm.prototype.Yb;lm.prototype.xa=function(a){return(this.ec[a.key]||om).c};lm.prototype.getLabels=lm.prototype.xa;lm.prototype.na=function(a){return(this.ec[a.key]||om).a};lm.prototype.getHybridIdx=lm.prototype.na;function pm(a,b,c,d,e){a.ec[b.key]=new nm(c,d,e)};function qm(a,b,c){this.ra=c&&c.type||\"\";lm.call(this,a,!0,b);this.f(c)}w(qm,lm);u(\"H.service.venues.Space\",qm);qm.prototype.j=function(){return this.ra};qm.prototype.getType=qm.prototype.j;qm.prototype.c=function(){return\"floor/polygon\"===this.ra};qm.prototype.isFloorSpace=qm.prototype.c;qm.prototype.b=function(a){a&&(this.Eh=new We(a))};qm.prototype.initLabelStyle=qm.prototype.b;qm.prototype.Yc=function(){var a=this.za;return this.isFloorSpace()?a:a&&a.za};qm.prototype.getFloor=qm.prototype.Yc;\nqm.prototype.a=0;qm.prototype.fc=function(){++this.a};qm.prototype.retain=qm.prototype.fc;qm.prototype.s=function(){var a=--this.a,b;a||(b=this.Yc(),this.isFloorSpace()?b.fb&&(b.a(b.fb),b.fb=null,rm(b)):b&&(delete b.j[this.sa()],b.c.a(this),rm(b)));return 1>a};qm.prototype.release=qm.prototype.s;function sm(){}sm.prototype.parse=function(){};u(\"H.service.remote.IParser.prototype.parse\",sm.prototype.parse);function tm(a,b,c){Q.call(this,jm(a));this.g=c;this.fb=new qm(a,b.id,b);this.U(this.fb);this.c=new Q(jm(a));this.U(this.c);this.j={}}w(tm,Q);u(\"H.service.venues.Floor\",tm);tm.prototype.na=function(){return this.g};tm.prototype.getLevel=tm.prototype.na;tm.prototype.s=function(){return this.fb};tm.prototype.getFloorSpace=tm.prototype.s;tm.prototype.S=function(){return this.c};tm.prototype.getSpaces=tm.prototype.S;tm.prototype.P=function(){return this.za};tm.prototype.getBuilding=tm.prototype.P;\ntm.prototype.getData=function(){return this.fb&&this.fb.getData()};tm.prototype.getData=tm.prototype.getData;tm.prototype.f=function(a){this.fb.f(a);return this};tm.prototype.setData=tm.prototype.f;tm.prototype.bg=function(a){return this.j[a]};tm.prototype.getSpace=tm.prototype.bg;function rm(a){if(!a.c.b&&!a.fb){var b=a.P(),c=a.g;c===b.c&&(b.c=0);delete b.s[c];b.a(a);b.b||(a=b.za,delete a.D[b.sa()],a.a(b),a.b||a.Sa().a(a))}};function um(){}var vm;um.prototype.a=Math.PI/180;function wm(a,b){return a&&a.category&&a.category[b||\"id\"]}function xm(a){var b,c;return a.sort(function(a,e){b=a.object.type;c=e.object.type;return b>c?-1:b<c?1:0})}\num.prototype.parse=function(a,b,c,d){var e=d.floorLevel,f=d.onSpaceCreated;d=d.styler;var g=[],h,k,l,n,m,r,t,v,y,K={};vm=!1;c=c.replace(/''( )?/g,'$1\\\\\"');try{c=Cl.JSON.parse(c)}catch(V){vm=!0}if(c.length)for(c=xm(c),h=c.length;h--;){k=c[h];l=k.area;m=l.length;t=y=r=void 0;(y=0<m)||(vm=!0,y=void 0);if(y)for(r=Array(m/2);m;)t=l[--m],y=l[--m],r[m/2]=new M(y,t);l=r?[r]:[];k=k.object;r=v=z;if(1!==k.type)switch(m=k.type.replace(\"/polygon\",\"\"),m){case \"floor\":m=r=k.buildingId;(y=a.dc[m])||(y=new km(a,m),\ny.ha(a));t=k.buildingMinLevel;v=k.buildingMaxLevel;(m=y.P(r))?m.adjustMinMaxLevels(t,v):(m=new im(a,r,t,v),r=y,y=m,r.D[y.sa()]=y,r.U(y),m.Gc(a.f));0>b.P.indexOf(m)&&b.P.push(m);(y=m.Yc(e))?(m=y.fb,l=m.Yb(b).concat(l)):(r=y=new tm(a,k,e),t=r.g,r.setVisibility(t===m.c),m.s[t]=r,m.U(r),m=y.fb,f&&f(m),t=wm(y.getData(),\"profileKey\"),v=d.Na(t,void 0),m.ba(v.floor));K[k.id]=y;0>g.indexOf(m)&&g.push(m);pm(m,b,l,-1);break;case \"hollow\":r=\"hollow-area\";case \"space\":if(n=k.id,y=K[/_d$/.test(k.outerAreaId)?k.outerAreaId:\nk.outerAreaId+\"_d\"])m=y.bg(n),t=wm(y.getData(),\"profileKey\"),r=r||wm(m?m.getData():k),m||(v=m=new qm(a,n,k),y.j[v.sa()]=v,y.c.U(v),v=d.Na(t,r),m.ba(v.space),f&&f(m)),m.fc(),(k=k.label)&&k.firstLinePos?(v=v||d.Na(t,r),r=m.Eh,k=[{lines:Ma(k.text,\"\\n\"),angle:k.rotation*this.a,font:k.font.face,size:k.font.size,lineHeight:k.font.lineHeight,color:r&&r.fillColor||v.spaceLabel.fillColor,x:k.firstLinePos[0],y:k.firstLinePos[1]}]):k=null,g.push(m),pm(m,b,l,-1,k)}}else vm=!0;return vm?void 0:{spatials:g}};\nu(\"H.service.venues.Parser.prototype.parse\",um.prototype.parse);function ym(a,b){var c=b||{};if(!(a&&a instanceof zm))throw Error(\"InvalidArgument: service required\");this.Se=A(this.Se,this);this.b=new $l(a,new um,{min:16,max:20,onSpaceCreated:c.onSpaceCreated});this.b.ha(this);this.Re=A(this.Re,this);this.b.addEventListener(\"update\",this.Re);this.ff=A(this.ff,this);this.b.addEventListener(\"reload\",this.ff);this.ef=A(this.ef,this);this.b.addEventListener(\"error\",this.ef);this.Te=c.pixelRatio||c.pixelratio||1;this.tileSize=256;this.f=mg(this.tileSize,this.Te);\nN.call(this,{min:16,max:20});this.P(new og(c.tileCacheSize||256,A(this.Se,this)))}w(ym,N);u(\"H.service.venues.TileProvider\",ym);p=ym.prototype;p.Te=1;p.Re=function(){this.dispatchEvent(\"update\")};p.ef=function(){this.dispatchEvent(\"error\")};p.ff=function(){this.j(!0)};p.Se=function(a,b){var c,d,e;c=b.a;for(e=c.length;e--;)d=c[e],delete d.ec[b.key],d.s();b.data&&Jl.push(b.j(),this.tileSize);b.s()};p.Gc=function(a){this.b.Gc(a)};ym.prototype.setCurrentLevel=ym.prototype.Gc;ym.prototype.D=function(){return this.b.f};\nym.prototype.getCurrentLevel=ym.prototype.D;ym.prototype.c=function(a,b,c,d){var e;this.g.get(this.getTileKey(a,b,c))?d(null,null):e=Cl.setTimeout(function(){d(null,null)},500);return{cancel:function(){Cl.clearTimeout(e)}}};ym.prototype.requestInternal=ym.prototype.c;ym.prototype.N=function(a,b,c){var d=Jl.pop(this.tileSize),e=this.g.get(this.getTileKey(a,b,c));e||(e=new Sl(this.B(a,b,c),a,b,c,this.tileSize,this.Te,c+this.f,this.b));e.ia(d)||Jl.push(d,this.tileSize);return e};\nym.prototype.createTileInternal=ym.prototype.N;function zm(a){var b=wl.venues;a=vl(b,a||{});G.call(this);this.f=b.baseUrl;this.c=a.path;this.g=a.subDomain;this.o=b.shards}w(zm,G);u(\"H.service.venues.Service\",zm);var Am={ERROR:-1,INIT:0,READY:1};zm.State=Am;\nzm.prototype.aa=function(a,b,c,d,e){this.a=(this.f||e).clone();this.l=this.a.clone().ya(\"js\").O(\"statics/venues\").uf();this.g&&this.a.ya(this.g);this.ra&&this.a.ya(this.ra);this.c&&this.a.gc(this.c);a=wl.venueSignature;b=this.a.clone();b.ya(a.subDomain);b.O(a.path);b.O(a.version);this.A=b;this.s=this.a.clone();this.J===Am.INIT&&this.b();return this};zm.prototype.configure=zm.prototype.aa;function am(a){return a.J===Am.READY}zm.prototype.V=function(){return am(this)?this.a:void 0};\nzm.prototype.b=function(){var a=this;(new Zg(\"application/json\",this.A.toString())).then(function(b){var c=b.SignatureTokens,d=(b=new Date(b.Expires))?b.getTime()-ya()-36E5:0;a.a.T(c);b&&4E9>d&&Cl.setTimeout(A(a.b,a),Math.max(d,0));Bm(a,Am.READY)},function(){Bm(a,Am.ERROR,\"Error fetching signature\")})};\nzm.prototype.j=function(a,b,c){var d=wl.venuesDiscovery;a=this.s.clone().ya(d.subDomain).O(d.path).O(d.version).T(vl(a,d.params));(new Zg(\"application/json\",a.toString())).then(b,function(a){a.json().then(function(a){c(a.status.message)},function(){c(a.statusText)})})};zm.prototype.discover=zm.prototype.j;zm.prototype.i=function(a){return new Hg(new ym(this,a))};zm.prototype.createTileLayer=zm.prototype.i;zm.prototype.J=Am.INIT;zm.prototype.getState=function(){return this.J};\nzm.prototype.getState=zm.prototype.getState;function Bm(a,b,c){var d=new rc(\"statechange\",a);c&&(d.errorCode=c);a.J=b;a.dispatchEvent(d)}U.prototype.o=function(a){return this.aa(new zm(a))};U.prototype.getVenueService=U.prototype.o;var Cm={subDomain:\"venue.maps\",path:\"\",shards:Ma(\"1 2 3 4\").map(function(a){return\"static-\"+a})};wl.venues=Cm;wl.venueSignature={version:\"v1\",subDomain:\"signature\",path:\"venues/signature\"};wl.venuesDiscovery={version:\"v1\",subDomain:\"discovery\",path:\"venues/discovery\"};var Dm={};function jm(a){Dm.provider=a;return Dm};function Em(){this.a={}}Em.prototype.ob=function(a,b){var c=a+b,d,e,f;if(!(d=this.a[c])){f={size:{w:26,h:32},anchor:{x:13,y:30}};if(\"CLOSURE\"!==a)switch(d=Fm,a){case \"CONGESTION\":d=d.replace(\"{{icon}}\",Gm);break;case \"ROADWORKS\":d=d.replace(\"{{icon}}\",Hm);break;case \"ACCIDENT\":d=d.replace(\"{{icon}}\",Im);break;default:d=d.replace(\"{{icon}}\",Jm)}else d=Km,f.anchor.y=16;e=Lm[b]||Lm.BLOCKING;d=d.replace(\"{{color}}\",e);this.a[c]=d=new O(d,f)}return d};\nvar Lm={BLOCKING:\"#323232\",VERYHIGH:\"#d5232f\",HIGH:\"#ffa100\"},Gm='<path d=\"m 18,15 0,0 c 0,-0.1 0,-0.2 0,-0.4 l 0,-0.2 c 0,-0.1 0,-0.2 0,-0.4 0,0 0,0 0,0 0.6,0 1.1,-0.4 1.1,-1 0,-0.5 -0.5,-1 -1,-1 -0.7,0 -1.1,0.5 -1.1,1 -0.1,0 -0.3,-0.1 -0.4,-0.1 l -0.6,0 -0.3,-0.5 C 15.2,11.6 14.3,11 13.3,11 L 18,11 17.2,9.6 C 17,9.3 16.7,9 16.3,9 L 12.8,9 C 12.4,9 12,9.3 11.8,9.6 L 11.1,11 9.8,11 C 9.7,11 9.6,11 9.5,11 9.2,11 9,10.9 9,10.6 L 9,10.4 C 9,10.2 9.2,9.9 9.5,9.9 l 1.2,0 0.6,-1.04 c 0.3,-0.5 0.9,-0.9 1.5,-0.9 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1.04 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 18.3,16 18,15.8 18,15.6 L 18,15 z M 8,18.1 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.6,0 -1.1,0.5 -1.1,1 0,0.6 0.5,1.1 1.1,1.1 m 7,0 c 0.6,0 1.1,-0.5 1.1,-1.1 0,-0.5 -0.5,-1 -1.1,-1 -0.5,0 -1,0.5 -1,1 0,0.6 0.5,1.1 1,1.1 M 14.2,13.6 C 14,13.3 13.7,13 13.3,13 L 9.8,13 C 9.4,13 9,13.3 8.8,13.6 L 8.1,15 15,15 14.2,13.6 z m -8.2,1 0,-0.2 c 0,-0.2 0.2,-0.5 0.5,-0.5 l 1.1,0 0.7,-1 C 8.6,12.4 9.2,12 9.8,12 l 3.5,0 c 0.6,0 1.2,0.4 1.5,0.9 l 0.6,1 1.2,0 c 0.2,0 0.4,0.3 0.4,0.5 l 0,0.2 c 0,0.3 -0.2,0.5 -0.4,0.5 l -0.1,0 c 0.3,0.3 0.5,0.7 0.5,1.1 l 0,3.4 c 0,0.2 -0.2,0.4 -0.4,0.4 l -1.1,0 C 15.3,20 15,19.8 15,19.6 L 15,19 8,19 8,19.6 C 8,19.8 7.8,20 7.5,20 l -1,0 C 6.2,20 6,19.8 6,19.6 l 0,-3.4 c 0,-0.4 0.2,-0.8 0.6,-1.1 l -0.1,0 C 6.2,15.1 6,14.9 6,14.6\" fill=\"#ffffff\" />',\nHm='<path d=\"m 9.24,13.2 -3.7,6.8 1.3,0 2.8,-5.1 1.36,1.5 0,3.6 1.1,0 0,-4 -1.4,-1.6 -1.46,-1.2 z M 14.2,9.5 c 0.7,0 1.3,-0.5 1.3,-1.21 0,-0.7 -0.6,-1.2 -1.3,-1.2 -0.7,0 -1.2,0.5 -1.2,1.2 0,0.71 0.5,1.21 1.2,1.21 m -4.46,0.5 1.06,0 -0.96,2.1 -1,-0.8 0.9,-1.3 z m 2.56,4 -1,-0.7 1,-1.9 0,2.6 z m 6.9,1.7 c -0.4,-0.5 -1.5,-1.1 -2.3,0 -0.2,0.3 -0.6,0.7 -0.9,1.2 l -2.7,-2.1 0,-5 -0.8,-0.7 -3.26,0 -1.5,2.3 7.86,6 C 14.7,18.6 13.8,20 13.8,20 l 6,0 1.5,-1.6 c 0,0 -1.7,-2.2 -2.1,-2.7\" fill=\"#ffffff\" />',Im=\n'<path d=\"m 10.2,15.9 c 0.4,-0.5 1,-0.5 1.4,0 0.5,0.4 0.5,1 0,1.4 -0.4,0.4 -1,0.4 -1.4,0 -0.45,-0.4 -0.45,-1 0,-1.4 m 4.9,-5 c 0.4,-0.4 1.1,-0.4 1.5,0 0.4,0.4 0.4,1.1 0,1.5 -0.4,0.4 -1.1,0.4 -1.5,0 -0.4,-0.4 -0.4,-1.1 0,-1.5 m 2.6,3.8 c 0.1,0.3 0,0.7 -0.3,1 l -1.9,1 c 0,0 0,0.8 0,1.1 0,0.3 0,0.2 -0.1,0.3 -0.1,0.1 -0.3,0.2 -0.5,0.2 l -2.6,-0.3 4.9,-4.9 0.5,1.6 z m -6.5,5 0.1,0.2 c 0.2,0.1 0.5,0.1 0.7,0 l 0.8,-0.9 1.8,0.1 c 1.1,0 1.4,0 1.7,-0.6 l 0.1,-1.3 1.8,-0.8 c 0.4,-0.4 0.6,-1.1 0.4,-1.7 l -0.3,-1.1 0.8,-0.8 c 0.2,-0.2 0.2,-0.5 0,-0.7 L 19,12 c -0.2,-0.2 -0.5,-0.2 -0.7,0 l -0.1,0.1 c 0.1,-0.5 -0.1,-0.9 -0.4,-1.3 L 15.5,8.44 C 15.3,8.26 15,8.26 14.8,8.44 l -0.7,0.74 c -0.2,0.19 -0.2,0.49 0,0.68 l 0.3,0.34 -4.92,5 -0.36,-0.4 C 8.93,14.6 8.63,14.6 8.45,14.8 L 7.7,15.6 c -0.18,0.1 -0.18,0.4 0,0.6 l 2.4,2.4 c 0.3,0.3 0.7,0.4 1.2,0.4 l -0.1,0.1 c -0.2,0.2 -0.2,0.5 0,0.7 m 5.6,-0.8 3.9,0 1.6,-2 -5.5,2 z m -8.08,0 -3.28,-1.8 0.9,1.8 2.38,0 z\" fill=\"#ffffff\" />',\nJm='<path d=\"m 12.9,15.1 c 0.6,0 1.1,-0.5 1.1,-1 l 0.4,-5.9 c 0,-0.6 -0.6,-1.04 -1.5,-1.04 -0.8,0 -1.4,0.44 -1.4,1.04 l 0.3,5.9 c 0,0.5 0.6,1 1.1,1 m 0,1.3 c -0.7,0 -1.3,0.6 -1.3,1.3 0,0.8 0.6,1.4 1.3,1.4 0.8,0 1.4,-0.6 1.4,-1.4 0,-0.7 -0.6,-1.3 -1.4,-1.3\" fill=\"#ffffff\" />',Fm='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m 16.8,29.4 c 0,-1.1 -1.8,-2 -4,-2 -2.2,0 -4.01,0.9 -4.01,2 0,1.1 1.81,2 4.01,2 2.2,0 4,-0.9 4,-2\" style=\"fill:#878787\"/><path d=\"m 24.1,17.8 c 1.6,-1.6 1.6,-3.8 0,-5.7 L 15.8,1.9 C 15,0.998 14,0.498 12.9,0.498 11.8,0.498 10.7,1.1 10,1.9 L 1.7,12.1 c -1.6,1.9 -1.6,4.1 0,5.7 L 12.9,29 24.1,17.8 z\" stroke=\"#fff\" stroke-width=\"1\" fill=\"{{color}}\" />{{icon}}</svg>',\nKm='<svg width=\"26\" height=\"32\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"13\" cy=\"15\" r=\"11\" fill=\"{{color}}\" stroke=\"#ffffff\" stroke-width=\"1\"/><rect x=\"6\" y=\"13\" width=\"14\" height=\"5\" fill=\"#ffffff\" /></svg>';function Mm(a,b,c){c=c?c:{};c.criticality||(c.criticality=\"major,critical\");if(!(a instanceof yl))throw Error(\"IllegalArgument: service\");yg.call(this,{max:20,min:8,requestData:A(this.Da,this)});this.I=new Em;this.N=a;this.b=c;this.j=A(this.j,this);this.W=setInterval(this.j,b||18E4)}w(Mm,yg);u(\"H.service.TrafficIncidentsProvider\",Mm);Mm.prototype.f={minor:\"HIGH\",\"low impact\":\"HIGH\",major:\"VERYHIGH\",critical:\"BLOCKING\"};\nMm.prototype.Da=function(a,b,c,d,e){var f=this,g=this.f,h=this.I;return this.N.f(a,b,c,function(a){var b=[];a=a.TRAFFIC_ITEMS;var c,e,r,t;if(a)for(a=a.TRAFFIC_ITEM,t=a.length;t--;){c=a[t];e=c.TRAFFIC_ITEM_TYPE_DESC;switch(e){case \"ACCIDENT\":case \"CONGESTION\":r=e;break;case \"CONSTRUCTION\":r=\"ROADWORKS\";break;default:r=\"OTHER\"}r=h.ob(r,g[c.CRITICALITY.DESCRIPTION]);e=c.LOCATION.GEOLOC.ORIGIN;e=new Mh({lat:e.LATITUDE,lng:e.LONGITUDE},{provider:f,icon:r});e.f(c);b.push(e)}d(b)},e,this.b)};\nMm.prototype.K=function(){yg.prototype.K.call(this);clearInterval(this.W)};function Nm(a){var b;if(a)for(this.a={},b=a.length;b--;)this.a[a[b]]=!0;this.Yg={}}var Om;Nm.prototype.a={};Nm.prototype.parse=function(a,b,c){var d,e,f,g,h,k;Om=!1;try{c=Cl.JSON.parse(c)}catch(l){Om=!0}if(c&&(d=c.metadata))for(e in k={spatials:[]},d){if(c=!this.a[e]&&(f=Pm[e]))(g=d[e])||(Om=!0,g=void 0),c=g;if(c)for(c=g.length;c--;){var n;(n=g[c])||(Om=!0,n=void 0);(h=n)&&f(b,a,this,e,h,k)}}else Om=!0;return Om?void 0:k};u(\"H.service.metaInfo.Parser.prototype.parse\",Nm.prototype.parse);\nvar Pm={\"street labels\":function(a,b,c,d,e,f){var g;(g=e.vertices)||(Om=!0,g=void 0);if(g){var h=g.length,k,l,n;(l=0<h)||(Om=!0,l=void 0);if(l)for(k=Array(h/2);h;)n=g[--h],l=g[--h],k[h/2]=new M(l,n);k=k?[k]:[];h=+e[\"font size\"]/a.Qb;g=c.Yg[h];g||(Qm.lineWidth=h,g=c.Yg[h]=c.cb.f(Qm));Rm(a,b,k,!1,g,e,d,f,-1)}delete e.vertices},\"city center labels\":function(a,b,c,d,e,f){Rm(a,b,Sm(e,[]),!0,c.cb,e,d,f,-1)},labels:function(a,b,c,d,e,f){var g;(g=e[\"bounding boxes\"])||(Om=!0,g=void 0);if(g){for(var h=g.length,\nk=[],l;h--;){var n;(n=g[h])||(Om=!0,n=void 0);(l=n)&&Sm(l,k)}Rm(a,b,k,!0,c.cb,e,d,f,-1)}delete e[\"bounding boxes\"]},buildings:function(a,b,c,d,e,f){var g=e.id,h=b.dc[g],k,l,n,m=[],r=[];(k=e)||(Om=!0,k=void 0);if(k&&((l=k.vertices)||(Om=!0,l=void 0),l)){var t;(t=k.polygons)||(Om=!0,t=void 0);(n=t)&&m.push.apply(m,Tm(l,n));(k=k.outlines)||(Om=!0,k=void 0);(n=k)&&r.push.apply(r,Tm(l,n))}n=m.length;m.push.apply(m,r);(r=m.length)||(Om=!0,r=void 0);r&&(h?(pm(h,a,m,n),f.spatials.push(h)):(h=Rm(a,b,m,!0,\nc.cb,e,d,f,n,g),b.U(h)))}};Pm[\"transit stops\"]=Pm.POIs=Pm.labels;var Um=[\"box 2\",\"box 1\",\"annotation box\",\"icon box\"];function Sm(a,b){for(var c=Um.length,d,e;c--;)if(d=Um[c],e=a[d]){var f=e[0],g=e[1],h=e[2];e=e[3];b.push([new M(f,g),new M(f+h,g),new M(f+h,g+e),new M(f,g+e)]);delete a[d]}return b}function Tm(a,b){var c=b.length,d,e,f,g,h;if(0<c)for(e=Array(c);c--;)if((d=b[c])||(Om=!0,d=void 0),d&&(g=d.length,0<g))for(e[c]=f=Array(g);g--;)h=2*d[g],f[g]=new M(a[h],a[h+1]);return e||[]}var Vm={};\nfunction Rm(a,b,c,d,e,f,g,h,k,l){Vm.style=e;d=new lm(b,d,l,Vm);pm(d,a,c,k);Wm(f);f.category=g;d.f(f);h.spatials.push(d);d.ha(b);return d}Nm.prototype.cb=new We({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0});var Qm={};function Wm(a){var b,c=!1;switch(typeof a){case \"object\":if(a instanceof Array)for(b=a.length;b--;)Wm(a[b])?c=!0:delete a[b];else if(a)for(b in a)Wm(a[b])?c=!0:delete a[b];break;case \"number\":c=!0;break;default:c=!!a}return c};function Xm(a,b,c){c=c||{};b=b||{};var d=c.tileType||\"maptile\",e=c.Gi||\"normal.day\";N.call(this,{min:0,max:20});!0===b.pois&&(b.pois=\"!F\");this.b=b;if(!(a&&a instanceof Ym))throw Error(\"InvalidArgument: service required\");this.$=a;this.I=A(this.I,this);this.$.addEventListener(\"versionupdate\",this.I);this.f=a.V().clone().O(d+\"/\"+a.yb()+\"/\"+e).T(this.da).T(b);this.Ja=a.g||null;this.Da=c.pixelRatio||c.pixelratio||1;this.tileSize=c.tileSize||256;this.tileType=d;this.scheme=e;this.D=new Ul(new Nm(c.categoryFilter));\nthis.D.ha(this);this.W=A(this.W,this);this.D.addEventListener(\"update\",this.W);N.call(this,{min:0,max:20});this.P(new og(c.tileCacheSize||256,A(this.Oa,this)))}w(Xm,N);u(\"H.service.metaInfo.TileProvider\",Xm);Xm.prototype.Oa=function(a,b){for(var c=b.a,d=c.length,e;d--;)e=c[d],delete e.ec[b.key],e.s();b.data&&(Jl.push(b.j(),this.tileSize),b.s())};Xm.prototype.W=function(){this.dispatchEvent(\"update\")};\nXm.prototype.c=function(a,b,c,d,e){var f=this.f.clone(),g=this.Ja,h=this.tileSize,k=this.getTileKey(a,b,c),k=this.g.get(k),l,n,m;k&&!k.uc()?(d(Jl.pop(this.tileSize),null),l={cancel:function(){}}):(g&&f.ya(g[(c+b+a)%g.length]),f.O(c+\"/\"+a+\"/\"+b+\"/\"+h+\"/png8\"),n=Cl.setTimeout(function(){m=(new Zg(\"text/plain\",f.toString())).then(function(a){d(null,a)},e)},500));return l||{cancel:function(){m?m.cancel():Cl.clearTimeout(n)}}};Xm.prototype.requestInternal=Xm.prototype.c;\nXm.prototype.N=function(a,b,c,d,e){var f=this.D,g;g=d||Jl.pop(this.tileSize);if(d)a=this.g.get(this.getTileKey(a,b,c)),a.ia(d);else if(d=a=new Vj(this.B(a,b,c),a,b,c,this.tileSize,this.Da,c+0,f),delete d.i,d.o=e,a.ia(g))for(e=a.a,g=e.length;g--;)e[g].fc();else Jl.push(g,this.tileSize);return a};Xm.prototype.createTileInternal=Xm.prototype.N;Xm.prototype.K=function(){this.D.K();this.$.removeEventListener(\"versionupdate\",this.I);N.prototype.K.call(this)};\nXm.prototype.I=function(){var a=this.$;this.f=a.V().clone().O(this.tileType+\"/\"+a.yb()+\"/\"+this.scheme).T(this.da).T(this.b);this.j(!1)};Xm.prototype.da={metadata:\"metaonly\",mgen:\"2\"};function Ym(a){a=vl(wl.maptile,a||{});G.call(this);this.f=a.baseUrl;this.c=a.path;this.i=a.subDomain;this.g=a.shards;this.ra=(this.A=!!a.ignoreTypes)?null:a.type;this.b=a.version;this.o=new zl}w(Ym,G);u(\"H.service.metaInfo.Service\",Ym);function Zm(a,b){for(var c={},d=a[b+\"s\"][b],e=d.length;e--;)c[d[e].id]=d[e];a[b+\"s\"]=c}Ym.prototype.aa=function(a,b,c,d,e){this.a=(this.f||e).clone();this.i&&this.a.ya(this.i);this.ra&&this.a.ya(this.ra);this.c&&this.a.gc(this.c);\"newest\"===this.b&&$m(this);return this};\nYm.prototype.configure=Ym.prototype.aa;Ym.prototype.V=function(){return this.a};Ym.prototype.yb=function(){return this.b};Ym.prototype.getVersion=Ym.prototype.yb;Ym.prototype.Ea=function(){return this.o};Ym.prototype.getCopyrights=Ym.prototype.Ea;\nfunction $m(a){var b=a.V().clone().O(\"info\").T({output:\"json\"});a.g&&b.ya(a.g[0]);tl({url:b,td:\"callback_func\",ic:function(b){b=JSON.parse(b.replace(/,\\s?\\]/g,\"]\")).response;var d;Zm(b,\"map\");Zm(b,\"scheme\");Zm(b,\"tiletype\");Zm(b,\"format\");Zm(b,\"resolution\");Zm(b,\"language\");if(\"newest\"===a.b&&\"traffic\"!==a.ra)for(d in b.maps)b.maps[d].hash&&b.maps[d].newest&&(a.b=b.maps[d].hash,a.dispatchEvent(\"versionupdate\"));a.l=b;a.dispatchEvent(\"infoupdate\")},Wc:function(a){throw Error(\"[\"+a+\"]: Could not fetch meta-info from map tile service @\"+\nb.toString());},mf:!0})}Ym.prototype.u=function(){return this.l};Ym.prototype.getInfo=Ym.prototype.u;Ym.prototype.s=function(a,b,c,d,e,f){return new Xm(this,d,{tileSize:a,pixelRatio:b,categoryFilter:c,tileType:e,scheme:f})};Ym.prototype.createTileProvider=Ym.prototype.s;Ym.prototype.j=function(a,b,c,d,e,f){a=this.s(a,b,c,d,e,f);return new Hg(a)};Ym.prototype.createTileLayer=Ym.prototype.j;\nU.prototype.j=function(a){var b;b=vl(wl.metainfotile,a||{});var c;c=\"\"+(b.ignoreTypes?\"\":b.type);c+=b.path;c+=b.subDomain;c+=b.baseUrl;c+=b.shards?b.shards.join(\"\"):\"\";b=Bl(c);c=this.a[\"meta\"+b];c||(c=this.aa(new Ym(a)),this.a[\"meta\"+b]=c);return c};U.prototype.getMetaInfoService=U.prototype.j;wl.metainfotile={type:\"base\",version:\"newest\",subDomain:\"maps\",path:\"maptile/2.1\",shards:[\"1\",\"2\",\"3\",\"4\"]};U.prototype.G=function(a,b,c,d,e,f){var g=this.b(),h=this.b({type:\"aerial\"}),k=this.b({type:\"traffic\"}),l=this.b({type:\"pano\"}),n=this.j(),m=this.s(),r=this.o(),t={},v={crossOrigin:\"anonymous\"},y;\"object\"===typeof a&&(f=a,v.crossOrigin=\"crossOrigin\"in f?f.crossOrigin:\"anonymous\",a=f.tileSize,b=f.ppi,c=f.lg,d=f.lg2,e=f.style,f=f.pois);a=a||256;y=320===b?2:1;320===b&&(t.ppi=b);c&&(t.lg=c);d&&(t.lg2=d);e&&(t.style=e);f&&(t.pois=f);b=new Mm(m,void 0,c?t:null);this.S=new Ng(b);return{normal:{xbase:g.b(\"xbasetile\",\n\"normal.day\",a,\"png8\",t,1,!1,v),xbasenight:g.b(\"xbasetile\",\"normal.night\",a,\"png8\",t,1,!1,v),base:g.b(\"basetile\",\"normal.day\",a,\"png8\",t,1,!1,v),basenight:g.b(\"basetile\",\"normal.night\",a,\"png8\",t,1,!1,v),map:g.b(\"maptile\",\"normal.day\",a,\"png8\",t,1,!1,v),mapnight:g.b(\"maptile\",\"normal.night\",a,\"png8\",t,1,!1,v),traffic:k.b(\"traffictile\",\"normal.day\",a,\"png8\",t,1,!1,v),trafficnight:k.b(\"traffictile\",\"normal.night\",a,\"png8\",t,1,!1,v),transit:g.b(\"maptile\",\"normal.day.transit\",a,\"png8\",t,1,!1,v),panorama:l.b(\"rctile\",\n\"normal.day\",a,\"png8\",t,1,!1,v),panoramanight:l.b(\"rctile\",\"normal.night\",a,\"png8\",t,1,!1,v),labels:g.b(\"labeltile\",\"normal.day\",a,\"png\",t,1,!1,v),metaInfo:n.j(a,y,[\"buildings\"],t)},satellite:{xbase:h.b(\"xbasetile\",\"hybrid.day\",a,\"jpg\",t,1,!0,v),base:h.b(\"basetile\",\"hybrid.day\",a,\"jpg\",t,1,!0,v),map:h.b(\"maptile\",\"hybrid.day\",a,\"jpg\",t,1,!0,v),traffic:k.b(\"traffictile\",\"hybrid.day\",a,\"jpg\",t,1,!0,v),panorama:l.b(\"rctile\",\"hybrid.day\",a,\"jpg\",t,1,!0,v),labels:h.b(\"labeltile\",\"hybrid.day\",a,\"png\",t,\n1,!0,v)},terrain:{xbase:h.b(\"xbasetile\",\"terrain.day\",a,\"jpg\",t,1,!1,v),base:h.b(\"basetile\",\"terrain.day\",a,\"jpg\",t,1,!1,v),map:h.b(\"maptile\",\"terrain.day\",a,\"jpg\",t,1,!1,v),traffic:k.b(\"traffictile\",\"terrain.day\",a,\"jpg\",t,1,!1,v),panorama:l.b(\"rctile\",\"terrain.day\",a,\"jpg\",t,1,!1,v),labels:h.b(\"labeltile\",\"terrain.day\",a,\"png\",t,1,!1,v)},incidents:this.S,venues:r.i({tileSize:a,pixelRatio:y})}};U.prototype.createDefaultLayers=U.prototype.G;function an(a){a=vl(wl.routing,a);a.callbackKey=\"jsoncallback\";an.v.constructor.call(this,a)}w(an,ul);u(\"H.service.RoutingService\",an);an.prototype.aa=function(a,b,c,d,e){an.v.aa.apply(this,[a,b,c,d,e]);this.b&&(this.a=this.b.clone());return this};an.prototype.configure=an.prototype.aa;an.prototype.f=function(a,b,c){a=this.V().clone().O(\"calculateroute.json\").T(a);this.pa(a,b,c)};an.prototype.calculateRoute=an.prototype.f;wl.routing={subDomain:\"route\",path:\"routing/7.2\"};U.prototype.kb=function(a){return this.aa(new an(a))};\nU.prototype.getRoutingService=U.prototype.kb;function bn(a){a=vl(wl.geocoding,a);a.callbackKey=\"jsoncallback\";bn.v.constructor.call(this,a);this.f=a.reverseSubDomain}w(bn,ul);u(\"H.service.GeocodingService\",bn);bn.prototype.aa=function(a,b,c,d,e){bn.v.aa.apply(this,[a,b,c,d,e]);this.b&&(this.a=this.b.clone());return this};bn.prototype.configure=bn.prototype.aa;bn.prototype.i=function(a,b,c){a=this.V().clone().O(\"geocode.json\").T(a);return this.pa(a,b,c)};bn.prototype.geocode=bn.prototype.i;\nbn.prototype.s=function(a,b,c){a=this.V().clone().O(\"reversegeocode.json\").T(a);this.f&&a.ya(this.f);return this.pa(a,b,c)};bn.prototype.reverseGeocode=bn.prototype.s;bn.prototype.j=function(a,b,c){a=this.V().clone().O(\"search.json\").T(a);return this.pa(a,b,c)};bn.prototype.search=bn.prototype.j;wl.geocoding={subDomain:\"geocoder\",path:\"6.2\",reverseSubDomain:\"reverse\"};U.prototype.Ya=function(a){return this.aa(new bn(a))};U.prototype.getGeocodingService=U.prototype.Ya;function cn(a){a=vl(wl.places,a);a.callbackKey=\"callback\";cn.v.constructor.call(this,a)}w(cn,ul);u(\"H.service.PlacesService\",cn);cn.EntryPoint={SEARCH:\"discover/search\",SUGGEST:\"suggest\",EXPLORE:\"discover/explore\",AROUND:\"discover/around\",HERE:\"discover/here\",CATEGORIES:\"categories/places\"};cn.prototype.f=function(a,b,c,d){b=b||{};a=this.V().clone().O(a).T(b);return this.pa(a,c,d)};cn.prototype.request=cn.prototype.f;cn.prototype.u=function(a,b,c){return this.f(\"discover/search\",a,b,c)};\ncn.prototype.search=cn.prototype.u;cn.prototype.C=function(a,b,c){return this.f(\"suggest\",a,b,c)};cn.prototype.suggest=cn.prototype.C;cn.prototype.s=function(a,b,c){return this.f(\"discover/explore\",a,b,c)};cn.prototype.explore=cn.prototype.s;cn.prototype.i=function(a,b,c){return this.f(\"discover/around\",a,b,c)};cn.prototype.around=cn.prototype.i;cn.prototype.o=function(a,b,c){return this.f(\"discover/here\",a,b,c)};cn.prototype.here=cn.prototype.o;\ncn.prototype.j=function(a,b,c){return this.f(\"categories/places\",a,b,c)};cn.prototype.categories=cn.prototype.j;cn.prototype.A=function(a,b,c,d){a=pl(a);d&&a.T(d);return this.pa(a,b,c)};cn.prototype.follow=cn.prototype.A;wl.places={subDomain:\"places\",path:\"places/v1\"};U.prototype.I=function(){return this.aa(new cn)};U.prototype.getPlacesService=U.prototype.I;function dn(a){a=vl(wl.enterpriseRouting,a);a.callbackKey=\"jsoncallback\";if(!C(a.baseUrl,T))throw new D(dn,0,\"Invalid base url\");this.s=a;dn.v.constructor.call(this,a)}w(dn,ul);u(\"H.service.EnterpriseRoutingService\",dn);dn.prototype.o=function(a,b,c){a=this.V().clone().O(\"calculateroute.json\").T(a);this.pa(a,b,c)};dn.prototype.calculateRoute=dn.prototype.o;dn.prototype.j=function(a,b,c){a=this.V().clone().O(\"getroute.json\").T(a);this.pa(a,b,c)};dn.prototype.getRoute=dn.prototype.j;\ndn.prototype.i=function(a,b,c){a=this.V().clone().O(\"getlinkinfo.json\").T(a);this.pa(a,b,c)};dn.prototype.getLinkInfo=dn.prototype.i;dn.prototype.f=function(a,b,c){a=this.V().clone().O(\"calculateisoline.json\").T(a);this.pa(a,b,c)};dn.prototype.calculateIsoline=dn.prototype.f;dn.prototype.aa=function(a,b,c,d,e){var f,g=wl.enterpriseRouting;this.s.baseUrl===g.baseUrl&&e&&(f=e.clone(),f.kd(g.host||g.baseUrl.rc),d&&f.ya(g.citSubDomain));return ul.prototype.aa.apply(this,[a,b,c,d,f])};\ndn.prototype.configure=dn.prototype.aa;var en={subDomain:\"route\",path:\"routing/6.2\",baseUrl:new T(\"http\",\"nlp.nokia.com\"),host:\"nlp.nokia.com\",citSubDomain:\"st\"};wl.enterpriseRouting=en;U.prototype.M=function(a){return this.aa(new dn(a))};U.prototype.getEnterpriseRoutingService=U.prototype.M;function fn(){}u(\"H.service.extension.util.ICharStream\",fn);p=fn.prototype;p.next=function(){};p.vf=function(){};p.Ae=function(){};p.Aa=function(){};p.pc=function(){};function gn(a){this.b=String(a);this.f=0;this.a=[];this.c=!1}u(\"H.service.extension.util.CharStream\",gn);p=gn.prototype;p.next=function(){var a=this.b.charCodeAt(this.f++),a=isNaN(a)?-1:a;this.c&&this.a.push(a);return a};p.vf=function(){this.c=!0;this.a=[]};p.Ae=function(){var a=this.a.slice();this.c=!1;this.a=[];return a};p.Aa=function(a){a=this.b.charCodeAt(this.f+(a||0));return isNaN(a)?-1:a};p.pc=function(){return this.f<this.b.length};function hn(a){if(a===B)a=\"\\t\";else if(!/^[^\"\\r\\n]$/.test(a))throw new D(hn,0);this.b=String(a).charCodeAt(0);this.Qe=A(this.Qe,this);this.J=jn}var jn=0;p=hn.prototype;p.getState=function(){return this.J};function kn(a,b,c){var d=a.J;if(d!==b)throw 1===d&&(a.J=jn),new ac(c,\"Requires state: \"+[\"READY\",\"PARSE\",\"PAUSE\"][b]+\" but found \"+[\"READY\",\"PARSE\",\"PAUSE\"][d]);}p.Qe=function(a){this.J=jn;throw new D(hn.prototype.parse,0,\"Malformed DSV at row \"+this.a.j+\" column \"+this.a.b+\": \"+a);};\nfunction ln(a,b){var c=[];a.parse(b,function(a,b,f){1>a&&(c[b]=f);return 0<a});a.J=jn;return c}p.parse=function(a,b,c){kn(this,jn,hn.prototype.parse);a=a.trim();this.a=new mn(a,this.b,this.Qe);this.c=b;this.wg=c||se;this.J=2;this.rf()};p.wg=se;\np.rf=function(){var a=this.a,b,c,d=[],e,f,g;kn(this,2,hn.prototype.rf);this.J=1;do{if(!a.o){this.J=jn;break}if(c>a.b){if(void 0!==f&&f!==c){this.a.a(\"The number of columns must be the same for all rows\");return}f=c}b=a.j;c=a.b;e=a.f;g=this.wg(b,c,a);if(a.f>e)for(;-1!==a.next(););else{for(;-1!==(e=a.next());)d.push(e);g=String.fromCharCode.apply(z,d);d.length=0}nn(a);this.c(b,c,g)&&(this.J=2)}while(1===this.J);2!=this.J&&void 0!==f&&0<c&&f!==c&&this.a.a(\"The number of columns must be the same for all rows\")};\nfunction mn(a,b,c){this.c=new gn(a);this.s=b;this.o=!0;this.f=this.j=this.b=0;nn(this);this.a=c;this.g=[];this.l=!1}mn.prototype.f=0;var on={ke:10,Jf:13,me:34,Kc:-1};function nn(a){var b=a.c.Aa();a.i=!1;(a.A=34===b)&&a.c.next()}function pn(a,b){var c=a.c;a.i=!0;switch(b){case a.s:a.b++;break;case on.Jf:c.next(),c.Aa()!==on.ke&&a.a(\"CR without LF\");case on.ke:a.b=0;a.j++;break;case on.Kc:a.o=!1;break;default:a.a(\"End of field expected\")}c.next();return on.Kc}p=mn.prototype;\np.Aa=function(){var a,b;if(this.i)b=on.Kc;else if(a=this.c,b=a.Aa(),this.A)switch(b){case on.me:a.next();b=a.Aa();b!==on.me&&(b=pn(this,b));break;case on.Kc:this.a(\"Closing quotation mark expected\")}else switch(b){case on.me:this.a(\"Unexpected quotation mark\");case this.s:case on.Jf:case on.ke:case on.Kc:b=pn(this,b)}return b};p.vf=function(){this.l=!0;this.g=[]};p.Ae=function(){var a=this.g.slice();this.l=!1;this.g=[];return a};\np.next=function(){var a=this.Aa();-1!==a&&this.c.next();this.l&&this.g.push(a);this.f++;return a};p.pc=function(){return!this.i&&-1!==this.Aa()};function qn(){}u(\"H.service.extension.dataView.ITable\",qn);qn.prototype.getMeta=qn.prototype.$c;qn.prototype.getRowCount=qn.prototype.g;qn.prototype.getRow=qn.prototype.oc;qn.prototype.getColumnNames=qn.prototype.b;qn.prototype.getColumn=qn.prototype.l;qn.prototype.getCell=qn.prototype.f;qn.prototype.concat=qn.prototype.concat;function rn(){}u(\"H.service.extension.dataView.IColumn\",rn);rn.prototype.getCell=rn.prototype.a;function sn(){}u(\"H.service.extension.dataView.IRow\",sn);sn.prototype.getColumnNames=sn.prototype.c;sn.prototype.getCell=sn.prototype.a;function tn(a){var b=un;if(!a||!pa(a.layerId)||a.rowFilter!==B&&!q(a.rowFilter)||a.rowFilterContext!==B&&!ra(a.rowFilterContext))throw new D(b,1,\"invalid layer config\"!==B?\"invalid layer config\":a);}function vn(a){return pa(a)&&/^[A-Z][A-Z0-9_]*$/.test(a)}function wn(a){for(var b=a&&a.length,c=0<b&&\"WKT\"===a[--b];c&&b--;)c=vn(a[b]);return c};function xn(a,b){this.dd=a;this.Pe=b}xn.prototype.c=function(){return this.dd.b()};u(\"H.service.extension.customLocation.DataRow.prototype.getColumnNames\",xn.prototype.c);xn.prototype.a=function(a){return this.dd.f(this.Pe,a)};u(\"H.service.extension.customLocation.DataRow.prototype.getCell\",xn.prototype.a);xn.prototype.g=function(a,b){this.dd.i(this.Pe,a,b)};u(\"H.service.extension.customLocation.DataRow.prototype.setCell\",xn.prototype.g);xn.prototype.b=!1;\nxn.prototype.i=function(a){this.b=!!a};u(\"H.service.extension.customLocation.DataRow.prototype.setDeleteMark\",xn.prototype.i);xn.prototype.f=function(){return this.b};u(\"H.service.extension.customLocation.DataRow.prototype.getDeleteMark\",xn.prototype.f);function yn(a,b){this.c=a;this.b=b}yn.prototype.a=function(a){return this.c.f(a,this.b)};u(\"H.service.extension.customLocation.DataColumn.prototype.getCell\",yn.prototype.a);yn.prototype.f=function(a,b){this.c.i(a,this.b,b)};u(\"H.service.extension.customLocation.DataColumn.prototype.setCell\",yn.prototype.f);function zn(){if(An)throw new ac(zn);}var An=!0;function Bn(a,b){var c,d,e,f;An=!1;c=new zn;An=!0;c.j=ol(x.JSON.parse(x.JSON.stringify(a)));d=a.columnNames;e=Ha();for(f=d.length;f--;)e[d[f]]=f;c.s=e;c.c=d.length;if(e=b){if(e.length%d.length)throw new D(Bn,1,\"Invalid number of cells\");}else e=[];c.a=e;return c}zn.prototype.$c=function(){return this.j};u(\"H.service.extension.customLocation.DataTable.prototype.getMeta\",zn.prototype.$c);zn.prototype.g=function(){return this.a.length/this.c};\nu(\"H.service.extension.customLocation.DataTable.prototype.getRowCount\",zn.prototype.g);zn.prototype.oc=function(a){return a<this.a.length/this.c?new xn(this,a):B};u(\"H.service.extension.customLocation.DataTable.prototype.getRow\",zn.prototype.oc);zn.prototype.re=function(a){var b=this.c,c=this.a,d=this.a.length/this.c;if(a){if(a.length%b)throw new D(this.re,0,\"Invalid number of cells\");this.a=c.concat(a)}else for(;b--;)c.push(z);return d};\nu(\"H.service.extension.customLocation.DataTable.prototype.appendRowCells\",zn.prototype.re);zn.prototype.b=function(){return this.j.columnNames};u(\"H.service.extension.customLocation.DataTable.prototype.getColumnNames\",zn.prototype.b);zn.prototype.l=function(a){return this.s[a]===B?B:new yn(this,a)};u(\"H.service.extension.customLocation.DataTable.prototype.getColumn\",zn.prototype.l);zn.prototype.f=function(a,b){return this.a[a*this.c+this.s[b]]};\nu(\"H.service.extension.customLocation.DataTable.prototype.getCell\",zn.prototype.f);zn.prototype.i=function(a,b,c){b=this.s[b];if(a>=this.a.length/this.c)throw new D(this.i,0,\"Row index out of bounds\");if(b===B)throw new D(this.i,0,\"Column unknown\");this.a[a*this.c+b]=c};u(\"H.service.extension.customLocation.DataTable.prototype.setCell\",zn.prototype.i);\nzn.prototype.concat=function(){var a=arguments.length,b,c=\"\"+this.b(),d=this.a?this.a.slice():[],e;for(b=0;b<a;b++){e=arguments[b];if(!(e instanceof zn))throw new D(this.concat,b);if(\"\"+e.b()!==c)throw new D(this.concat,b,\"Incompatible columns!\");e.a&&(d=d.concat(e.a))}return Bn(this.j,d)};u(\"H.service.extension.customLocation.DataTable.prototype.concat\",zn.prototype.concat);var Cn=/(\\n|\\t|\\r|\")/;\nzn.prototype.o=function(a,b){var c,d=this.c,e=this.b(),f=[],g,h=[],k=this.a,l=-1;for(c=0;c<d;c++)if(!a||a.test(e[c]))\"WKT\"===e[c]&&(l=f.length),f.push(c);if(!(g=f.length))throw new D(this.o,1,\"No columns filtered\");Dn(this,h,e,0,d,f,g,l);if(b)for(c=b.length;c--;)h.push(\"\\n\"),e=b[c],Dn(this,h,k,e,d,f,g,l);else for(e=this.g();e--;)h.push(\"\\n\"),Dn(this,h,k,e,d,f,g,l);return h.join(\"\")};\nfunction Dn(a,b,c,d,e,f,g,h){var k,l;for(k=0;k<g;k++)if(k&&b.push(\"\\t\"),l=c[d*e+f[k]],k!==h){if(l!==B&&l!==z&&l===l&&l!==Eb&&l!==-Eb){l=String(l);if(Cn.test(l))throw new D(a.o,0,'Invalid character (\\\\n, \\\\r, \\\\t, or \") in row '+d+\" column \"+a.j.columnNames[f[k]]);b.push(l)}}else b.push(l)};function En(a){C(a,Fn,En,0);this.a=a}\nEn.prototype.create=function(a,b,c){function d(){setTimeout(function(){l.b(h,function(a){setTimeout(e.bind(null,a),m)},function(){64E3>n?(n+=m,d()):c(x.Error(\"Timeout\"))})},m);m*=2}function e(d){var e=JSON.stringify(d.b()).replace(/\"GEOMETRY_ID\"\\s*,\\s*\"/,'\"'),f=a.grants,g;e!==JSON.stringify(k)?(g=\"Results into different column names on the back-end: \"+e,setTimeout(function(){l.f(h,function(){c(x.Error(g))},function(a){c(x.Error(g+\". \"+a.message))})},m)):f&&f.length?l.c(h,f,b,c):b(d)}var f,g,h,k,l=\nthis,n=0,m=1E3;g=!a||!vn(h=a.layerId)&&(f=\"layerId\")||!wn(k=a.columnNames)&&(f=\"columnNames\")?0:q(b)?q(c)?-1:2:1;if(0<=g)throw new D(En.prototype.create,g,f||arguments[g]);Gn(l.a,h,function(){c(x.Error(\"Layer already exists\"))},function(){var b={layer_id:h,file:k.join(\"\\t\")},e=a.level,f=a.storage;e!==B&&(b.level=e);f!==B&&(b.storage=f);Hn(l.a,b,d,c)})};u(\"H.service.extension.customLocation.DataLayerManager.prototype.create\",En.prototype.create);\nEn.prototype.c=function(a,b,c,d){function e(){if(++g<f){var k={layer_id:a,granted_app_id:b[g].grantedAppId,permissions:b[g].permissions.join(\",\")},k=h.a.V().clone().O(\"layers/access/grant.json\").T(k);(new Zg(\"application/json\",k+\"\")).then(e,d)}else h.b(a,c,d)}var f=b&&b.length,g=-1,h=this;e()};u(\"H.service.extension.customLocation.DataLayerManager.prototype.grantAccess\",En.prototype.c);En.prototype.b=function(a,b,c){Gn(this.a,a,function(a){b(Bn(a))},c)};\nu(\"H.service.extension.customLocation.DataLayerManager.prototype.fetch\",En.prototype.b);En.prototype.f=function(a,b,c){var d=this.a;a={layer_ids:a};a=d.V().clone().O(\"layers/delete.json\").T(a);d.pa(a,b,c)};u(\"H.service.extension.customLocation.DataLayerManager.prototype.delete\",En.prototype.f);function Fn(a){a=vl(wl.cle,a);Fn.v.constructor.call(this,a)}w(Fn,ul);u(\"H.service.extension.customLocation.Service\",Fn);wl.cle={subDomain:\"cle\",path:\"2\"};Fn.prototype.list=function(a,b,c){a=this.V().clone().O(\"layers/list.json\").T(a);return this.pa(a,b,c)};function In(a,b,c,d){b=a.V().clone().O(\"layers/modify.json\").T(b);return a.pa(b,c,d)}function Hn(a,b,c,d){b=a.V().clone().O(\"layers/upload.json\").T(b);a.pa(b,function(a){Jn(a,c,d)},d)}\nfunction Jn(a,b,c){var d=a.issues;d&&a.error_id&&a.response_code?c(x.Error(d[0].message)):b(a)}function Gn(a,b,c,d){var e=a.V();a=e.clone().O(\"search/all.txt\").T({filter:'WKT==\"\"',layer_id:b});(new Zg(\"text/plain\",a+\"\")).then(function(a){var g=a.replace(/[\\r\\n]+$/g,\"\").split(\"\\t\");a=e.clone().O(\"layers/list.json\").T({layer_id:b,detail_level:\"all\"});(new Zg(\"application/json\",a+\"\")).then(function(a){Jn(a,function(a){a=a.layers[0];a.columnNames=g;c(a)},d)},d)},d)}\nfunction Kn(a,b,c,d){b=a.V().clone().O(\"search/all.json\").T(b);return a.pa(b,c,d)}function Ln(a,b,c,d){b=a.V().clone().O(\"search/bbox.json\").T(b);return a.pa(b,c,d)}function Mn(a,b,c,d){b=a.V().clone().O(\"search/corridor.json\").T(b);return a.pa(b,c,d)}function Nn(a,b,c,d){b=a.V().clone().O(\"search/proximity.json\").T(b);return a.pa(b,c,d)}Fn.prototype.f=function(a,b){var c=b&&b.resultType,d=new un(this,a,b),e,f=On;c==f.MARKER||c===f.DOM_MARKER?e=new Ng(d):e=new Hg(d);return e};\nFn.prototype.createTileLayer=Fn.prototype.f;U.prototype.P=function(a){return this.aa(new Fn(a))};U.prototype.getCustomLocationService=U.prototype.P;Fn.prototype.pa=function(a,b,c){return Fn.v.pa.call(this,a,function(a){var e=a.issues;e&&e.length?c(x.Error(e[0].message)):b(a)},c)};function Pn(a,b){this.b=a;this.f=b}u(\"H.service.extension.dataView.ObjRow\",Pn);Pn.prototype.c=function(){return this.b.b()};Pn.prototype.getColumnNames=Pn.prototype.c;Pn.prototype.a=function(a){return this.b.f(this.f,a)};Pn.prototype.getCell=Pn.prototype.a;function Qn(a,b){this.c=a;this.b=b}u(\"H.service.extension.dataView.ObjColumn\",Qn);Qn.prototype.a=function(a){return this.c.f(a,this.b)};Qn.prototype.getCell=Qn.prototype.a;function Rn(a,b,c){var d;if(a&&a.length)for(this.Db=a,this.kc=a=b||Object.keys(this.Db[0]),this.ve=b=Ha(),d=a.length;d--;)b[a[d]]=!0;c!==B&&(this.Ye=c)}u(\"H.service.extension.dataView.ObjTable\",Rn);p=Rn.prototype;p.Ye=B;p.Db=B;p.kc=B;p.ve=B;p.$c=function(){return this.Ye};Rn.prototype.getMeta=Rn.prototype.$c;Rn.prototype.g=function(){return this.Db?this.Db.length:0};Rn.prototype.getRowCount=Rn.prototype.g;Rn.prototype.oc=function(a){var b=this.Db;return b&&b[a]?new Pn(this,a):B};\nRn.prototype.getRow=Rn.prototype.oc;Rn.prototype.b=function(){return this.kc||te};Rn.prototype.getColumnNames=Rn.prototype.b;Rn.prototype.l=function(a){return this.ve[a]?new Qn(this,a):B};Rn.prototype.getColumn=Rn.prototype.l;Rn.prototype.f=function(a,b){var c=this.Db;return(c=c&&this.ve[b]&&c[a])&&c[b]};Rn.prototype.getCell=Rn.prototype.f;\nRn.prototype.concat=function(){var a=arguments.length,b,c=this.kc,d=\"\"+this.kc,e=(this.Db||[]).slice(),f;for(b=0;b<a;b++){f=arguments[b];if(!(f instanceof Rn))throw new D(this.concat,b);if(f.Db){if(c&&\"\"+f.kc!==d)throw new D(this.concat,b,\"Incompatible columns!\");e=e.concat(f.Db)}}return new Rn(e,this.kc,this.Ye)};Rn.prototype.concat=Rn.prototype.concat;function Sn(a,b,c){var d=On,e=a===d.POLYGON,f=a===d.POLYLINE;this.b=b;this.c=c||ic;(this.a=f||e)?this.l=e:this.g=a===d.MARKER;this.f=this.a?\"$HProjGeometry\":\"geometry\"}\nSn.prototype.parse=function(a,b,c){var d,e,f,g,h,k={},l=[],n,m,r,t;n=0;for(m=c.length;n<m;n++)if(d=c[n],r=d.Rows,d=r.length)for(e=Object.keys(r[0]).filter(function(a){return\"geometry\"!==a&&\"$HProjGeometry\"!==a}),e=new Rn(r,e),t=0;t<d;t++)if(f=r[t],h=f[this.f]){if(delete f[this.f],f=e.oc(t))try{this.a?g=Tn(this,a,b,f,h):g=Un(this,a,f,h[0]),g.ha(a),l.push(g)}catch(v){this.c(v.message)}}else this.c(\"Layer must contain geometries\");k[this.a?\"spatials\":this.g?\"markers\":\"domMarkers\"]=l;return k};\nfunction Tn(a,b,c,d,e){var f=[],g=e.length,h=a.b&&a.b(d);for(a=new lm(b,a.l,B,{style:h||a.i,data:d});g--;)f.push(Vn(e[g]));pm(a,c,f);return a}function Un(a,b,c,d){d=new Xb(d[0],d[1]);var e=a.b&&a.b(c);a.g?(a={icon:e,data:c,provider:b},a=new Mh(d,a)):(a={icon:e,data:c,provider:b},a=new zg(d,a));return a}function Vn(a){for(var b=0,c=a.length,d=[];b<c;)d.push(new M(a[b++],a[b++]));return d};function Wn(a){a=a||{};var b=a.tileCacheSize||1024,c=a.resultType,d=a.styleCallback,e=On;a.min!==B||(a.min=12);Wn.v.constructor.call(this,a);if(-1===Xn.indexOf(c))throw new D(Wn,2,\"invalid resultType\");this.b=c;if(d&&!q(d))throw new D(Wn,2,\"invalid style callback\");this.da=d;this.W=a.pixelRatio||1;this.f=A(this.f,this);this.P(new og(b,A(this.Jh,this)));this.createTileInternal=c===e.POLYLINE||c===e.POLYGON?A(this.sh,this):A(this.rh,this)}w(Wn,N);u(\"H.service.extension.TileProvider\",Wn);\nWn.prototype.I=!1;var Yn=O.prototype.Nc.READY;Wn.prototype.s=function(a,b,c,d){return this.I?Wn.v.s.call(this,a,b,c,d):B};Wn.prototype.requestTile=Wn.prototype.s;Wn.prototype.f=function(a){a=pa(a)?a:a+\"\";this.dispatchEvent(new tc(\"error\",a,this))};Wn.prototype.l=function(){return this.b===On.MARKER};Wn.prototype.providesMarkers=Wn.prototype.l;Wn.prototype.i=function(){return this.b===On.DOM_MARKER};Wn.prototype.providesDomMarkers=Wn.prototype.i;\nWn.prototype.u=function(){return this.b===On.POLYLINE||this.b===On.POLYGON};Wn.prototype.providesSpatials=Wn.prototype.u;function Zn(a){a.D||(a.$||(a.$=a.N(a.b,a.da,a.f)),a.D=new Ul(a.$),a.D.ha(a),a.D.addEventListener(a.G.la,A(a.Ih,a)),a.D.N=!0);return a.D}p=Wn.prototype;\np.rh=function(a,b,c,d){var e=this.getTileKey(a,b,c),e=this.g.get(e),f=this.b==On.DOM_MARKER,g=[],h=Zn(this);e?e.valid=!0:(a=e=new tg(a,b,c,z),delete a.i,a.o=d);d=f?Yl(h,e,\"domMarkers\"):Yl(h,e,\"markers\");for(b=d.length;b--;)a=d[b],a.Df=e,(f||a.ob().getState()===Yn)&&g.push(a);e.data=g;return e};p.Ih=function(a){if(a=a.target.Df)a.valid=!1};\np.sh=function(a,b,c,d){var e=Zn(this),f,g=this.getTileKey(a,b,c),h=this.g.get(g);f=Jl.pop(this.tileSize);h||(a=h=new Vj(g,a,b,c,this.tileSize,this.W,c,e),delete a.i,a.o=d);h.ia(f)||Jl.push(f,this.tileSize);return h};p.Jh=function(a,b){var c,d;c=On;if(this.b===c.POLYLINE||this.b===c.POLYGON){c=b.a;for(d=c.length;d--;)delete c[d].ec[b.key];b.data&&(Jl.push(b.j(),this.tileSize),b.s())}else for(c=b.data,d=c.length;d--;)delete c[d].Df};p.F=function(){Wn.v.F.call(this);Zn(this).K()};\nvar On={MARKER:0,DOM_MARKER:1,POLYLINE:2,POLYGON:3};Wn.ResultType=On;var Xn=[On.MARKER,On.DOM_MARKER,On.POLYLINE,On.POLYGON];function un(a,b,c){var d=this,e=b&&b.rowFilter,f,g,h=c.resultType,k,l=On;un.v.constructor.call(this,c);C(a,Fn,un,0);tn(b);e?(f=La(b),f.rowFilter=e.toString()):f=b;(new dh).jd(\"cle\",\"H.service.extension.worker.processor\");k=b.layerId;a.list({detail_level:\"all\",layer_id:k},function(b){b=b.layers;var c;for(c=0;c<b.length;c++)if(b[c].layerId===k){f.level=b[c].level;break}g=a.V().clone().O(\"tiled/tile.json\").T({meta:1});(new fh(\"cle\",{message:[d.uid,0,{tileSize:d.tileSize,projected:!0,polylineClippingMode:h===\nl.POLYLINE,serverUrl:g.toString(),layerConfigs:[f],batchTiles:!1}]})).then(function(){d.I=!0;kg(d)},d.f)},this.f)}w(un,Wn);u(\"H.service.extension.customLocation.TileProvider\",un);un.prototype.N=function(a,b,c){return new Sn(a,b,c)};\nun.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:ic},l=!0,n,m=On;g&&(this.b===m.POLYLINE||this.b===m.POLYGON?g.uc()||(d(Jl.pop(this.tileSize),null),l=!1):(d(z),l=!1));l&&(n=Cl.setTimeout(function(){h=new fh(\"cle\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():Cl.clearTimeout(n)});return k};un.prototype.requestInternal=un.prototype.c;un.prototype.F=function(){un.v.F.call(this);new fh(\"cle\",{message:[this.uid,3]})};var $n,ao,bo,co,eo,fo=\"GEOMETRY POINT MULTIPOINT LINESTRING MULTILINESTRING POLYGON MULTIPOLYGON Triangle CircularString Curve MultiCurve CompoundCurve CurvePolygon Surface MultiSurface PolyhedralSurface TIN GeometryCollection\".split(\" \"),go={0:1,1:2,2:1,3:2,4:2,5:3};function ho(){var a=\"Malformed WKT.\";void 0!==B&&(a+=\" At position undefined\");throw new D(io,0,a);}\nfunction io(a){var b=z;bo||(bo={POINT:jo,MULTIPOINT:ko,LINESTRING:lo,MULTILINESTRING:mo,POLYGON:no,MULTIPOLYGON:oo});co=null;ao=$n=!1;eo=a;co=a=po();-1===fo.indexOf(a)&&ho();bo[a]&&(b=bo[a]());return b}function qo(a){var b=ro(a,[]);\"LINESTRING\"===co&&(b.data=[b.data]);if(77===eo.Aa()||90===eo.Aa()){var c=po(),d=eo.Aa();if(\"M\"==c||\"Z\"==c||\"ZM\"==c)32!==d&&40!==d&&ho(),\"M\"==c&&($n=!0),\"Z\"==c&&(ao=!0),\"ZM\"==c&&(ao=$n=!0)}40==eo.Aa()?b=so(a,to):\"EMPTY\"!==po()&&ho();return b}\nfunction so(a,b){var c;return(c=b(go[a]))?ro(a,\"EMPTY\"===c?[]:c):z}function po(){for(var a=eo,b,c,d;32==a.Aa();)co||ho(),a.next();a.vf();for(b=a.Aa();a.pc()&&!uo(a.Aa());)a.next();c=a.Ae();if(0!==c.length){d=[];for(b=0;b<c.length;b++)d.push(String.fromCharCode(c[b]));b=d.join(\"\")}else a.next();for(;32==a.Aa();)a.next();return b}function uo(a){return 32==a||44==a||40==a||41==a}\nfunction vo(a){for(var b=[[]],c=b[0],d=po(),e=0;-1!=d;){e>a&&ho();if(40===d)b.push(c),c=[],b[b.length-1].push(c),e++;else if(41===d)0!==c.length&&0!==b.length||ho(),c=b.pop(),e--,wo(c),0>e&&ho();else if(44===d)Wa(c[0])&&c.length%2&&ho(),ra(c[0])&&c[0][0].length%2&&ho();else{if(\"EMPTY\"==d)return d;E(d)&&ho();c.length%2?c.splice(c.length-1,0,Va(d)):c.push(Va(d))}d=po()}e&&ho();return b[0][0]}function wo(a){var b,c=a.length;if(Wa(a[0]))c%2&&ho();else for(b=0;b<c;b++)wo(a[b])}\nfunction to(a){var b=eo,c=0,d,e,f=0,g=[];for(b.pc()||ho();b.pc();){for(;40===b.Aa();)c++,po();c>a&&ho();d=po();d=Va(d);E(d)&&ho();b.pc()||ho();e=g.length;\"POINT\"===co?1==e?g.unshift(d):g.push(d):e%2?g.splice(e-1,0,d):g.push(d);f++;2<f&&!$n&&!ao&&ho();for(3<f&&(!$n||!ao)&&ho();41===b.Aa();)2>f&&ho(),c--,po();44===b.Aa()&&(\"POINT\"===co&&ho(),po(),f%2&&ho(),f=0)}c&&ho();e=g.length;0<e&&\"POINT\"===co&&(a=e,$n&&ao?4!==a&&ho():$n||ao?3!==a&&ho():2!==a&&ho());\"LINESTRING\"===co&&(g=[g]);return g}\nfunction ro(a,b){var c={type:a,data:b};0===a&&(c.m=!!$n,c.z=!!ao);return c}function jo(){return qo(0)}function ko(){return qo(1)}function lo(){return qo(2)}function mo(){return so(3,vo)}function no(){return so(4,vo)}function oo(){return so(5,vo)};function xo(a,b,c,d){d=d||{};if(!b)throw new D(xo,1,\"has to be a function\");if(!c)throw new D(xo,2,\"has to be a function\");this.c=b;this.i=c;this.a=[];this.g=d.duration||yo;this.b=A(this.b,this);this.f={};var e;a=a.split(\"Meta:\\t\").slice(1);for(b=0;b<a.length;b++)d=a[b].split(\"\\n\"),c=d[0].split(\"\\t\")[0],d=d.slice(1).join(\"\\n\"),this.mc[c]=new hn,this.qc[c]=ln(this.mc[c],d),e={layerId:c,columnNames:this.qc[c]},this.Je.push(c),this.f[c]=Bn(e),this.Fb[c]=ui(),zo(this,d,c),this.b(c)}var yo=100;p=xo.prototype;\np.qc={};p.Je=[];p.mc={};p.Fb={};p.Oe={};function zo(a,b,c){var d={},e,f,g,h=a.qc[c].length-1,k=a.qc[c].indexOf(\"WKT\");try{a.mc[c].parse(b,function(b,k,l){return 0<b&&(d[a.qc[c][k]]=l,k===h&&(e=a.qc[c].map(function(a){return d[a]}),g=a.f[c],f=g.re(e),a.a.push(g.oc(f)),d={},ui()-a.Fb[c]>a.g))?!0:!1},function(a,b,c){if(0<a&&b===k)return io(c)})}catch(l){a.i(l)}}p.cancel=function(){for(var a in this.Oe)x.clearTimeout(this.Oe[a])};\nu(\"H.service.extension.customLocation.AsyncParser.prototype.cancel\",xo.prototype.cancel);xo.prototype.b=function(a){var b=this,c;this.Oe[a]=x.setTimeout(function(){if(2===b.mc[a].getState())b.Fb[a]=ui(),b.c(b.a,!1),b.a=[],b.mc[a].rf(),b.b(a);else{c=!0;for(var d=0;d<b.Je.length;d++)if(b.mc[b.Je[d]].getState()!==jn){c=!1;break}c&&(0<b.a.length&&b.c(b.a,!0),b.a=[])}},0)};function Ao(a){C(a,Fn,Ao,0,\"has invalid type\");this.a=a}Ao.prototype.g=function(a,b,c,d,e){var f,g=[];if(!pa(a))throw new D(this.g,0,\"has invalid type\");C(b,F,this.g,1,\"has invalid type\");Bo(this.g,2,c,d);b={layer_id:a,bbox:b.ka+\",\"+b.fa+\";\"+b.ja+\",\"+b.ga};e&&Aa(b,e);e=Ln(this.a,b,function(b){b=Co(b,a);f=new xo(b,c,d);g.push(f)},d);g.push(e);return new Do(g)};u(\"H.service.extension.customLocation.RequestManager.prototype.searchByBoundingBox\",Ao.prototype.g);\nAo.prototype.c=function(a,b,c,d,e,f){var g,h=[];if(!Ua(a))throw new D(this.c,0,\"has invalid type\");C(b,Xb,this.c,1,\"has invalid type\");if(!Wa(c))throw new D(this.c,2,\"has invalid type\");Bo(this.c,3,d,e);a={layer_ids:a.join(\",\"),proximity:b.lat+\",\"+b.lng+\",\"+c};f&&Aa(a,f);f=Nn(this.a,a,function(a){a=Co(a);g=new xo(a,d,e);h.push(g)},e);h.push(f);return new Do(h)};u(\"H.service.extension.customLocation.RequestManager.prototype.searchByProximity\",Ao.prototype.c);\nAo.prototype.b=function(a,b,c,d,e,f){var g,h,k=\"\",l=[];if(!Ua(a))throw new D(this.b,0,\"has invalid type\");if(!pa(b)&&!C(b,L))throw new D(this.b,1,\"has invalid type\");if(!Wa(c))throw new D(this.b,2,\"has invalid type\");Bo(this.b,3,d,e);a={layer_ids:a.join(\",\"),radius:c};if(pa(b))a.route_id=b;else{h=b.Z;b=0;for(c=h.length;b<c;b+=3)k+=h[b]+\",\"+h[b+1],b<c-3&&(k+=\",\");a.corridor=k}f&&Aa(a,f);f=Mn(this.a,a,function(a){a=Co(a);g=new xo(a,d,e);l.push(g)},e);l.push(f);return new Do(l)};\nu(\"H.service.extension.customLocation.RequestManager.prototype.searchByCorridor\",Ao.prototype.b);Ao.prototype.i=function(a,b,c,d){var e,f,g=[];if(!pa(a))throw new D(this.i,0,\"has invalid type\");Bo(this.i,1,b,c);e={layer_id:a};d&&Aa(e,d);d=Kn(this.a,e,function(d){d=Co(d,a);f=new xo(d,b,c);g.push(f)},c);g.push(d);return new Do(g)};u(\"H.service.extension.customLocation.RequestManager.prototype.download\",Ao.prototype.i);\nfunction Bo(a,b,c,d){if(!q(c))throw new D(a,b,\"has invalid type\");if(!q(d))throw new D(a,b+1,\"has invalid type\");}var Eo={\"delete\":/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/,update:null};\nAo.prototype.f=function(a,b,c){var d,e,f,g={},h,k=Ha(),l,n,m=[],r=0,t,v=0;if(!Ua(a))throw new D(this.f,0,a);Bo(this.f,1,b,c);for(d=a.length;d--;){h=a[d];C(h,xn,this.f,0,\"- Invalid entry at index \"+d);l=h.dd.$c().layerId;e=h.a(\"GEOMETRY_ID\");if(e!==B&&e!==z){if(g[f=l+\"_\"+e])throw new D(this.f,0,'- Duplicated geometry ID \"'+e+'\" for layer \"'+l+'\" found');g[f]=h;e=h.b?\"delete\":\"update\"}else e=h.b?B:\"append\";e&&(f=k[l]||(k[l]=Ha()),n=f[e],n||(n=f[e]=[],r++),n.push(h))}for(l in k)for(e in f=k[l],f){t=\nf[e];a=[];for(d=t.length;d--;)a.push(t[d].Pe);m.push(In(this.a,{layer_id:l,action:e,changes:t[0].dd.o(Eo[e],a)},function(){v++;b(t,v===r)},function(a){v++;c(a,t,v===r)}))}return new Do(m)};u(\"H.service.extension.customLocation.RequestManager.prototype.upload\",Ao.prototype.f);function Do(a){this.a=a}Do.prototype.cancel=function(){for(var a=this.a,b=a.length;b--;)a[b].cancel();a.length=0};\nfunction Co(a,b){var c=\"\",d,e,f,g,h,k=[];if(!b){g={};k=[];if(a.geometries)for(e=0;e<a.geometries.length;e++)f=a.geometries[e],g[f.layerId]||(g[f.layerId]=[]),g[f.layerId].push(f);for(d in g)k.push({layerId:d,geometries:g[d]});for(d=0;d<k.length;d++)c+=Co(k[d],k[d].layerId)}else if(a.geometries&&a.geometries.length)for(h=Object.keys(a.geometries[0].attributes),c=c+(\"Meta:\\t\"+b+\"\\n\")+h.join(\"\\t\"),c+=\"\\tWKT\\n\",d=0;d<a.geometries.length;d++){g=a.geometries[d].attributes;f=a.geometries[d].geometry;for(e=\n0;e<h.length;e++)k.push(g[h[e]]);c+=k.join(\"\\t\");c+=\"\\t\"+f+\"\\n\";k=[]}return c};function Fo(a,b,c,d){if(!a||!pa(nl(a.layerId,a.layer))||!Wa(a.level)||a.rowFilter!==B&&!q(a.rowFilter)||a.rowFilterContext!==B&&!ra(a.rowFilterContext))throw new D(b,c,d!==B?d:a);};function Go(a,b,c){var d;C(a,Ho,Go,0,\"has invalid type\");C(b,F,Go,1,\"has invalid type\");if(!Ua(c))throw new D(Go,2,\"has invalid type\");for(d=0;d<c.length;d++)Fo(c[d],Go,2,\"has invalid type\");Go.v.constructor.call(this);this.a=b;this.b=c;(new dh).jd(Io,\"H.service.extension.worker.processor\");a=a.V().clone().O(Jo+\".\"+Ko).T({meta:\"1\"});new fh(Io,{message:[Lo,0,{serverUrl:a.toString()}]})}w(Go,G);u(\"H.service.extension.platformData.SearchRequest\",Go);\nGo.prototype.send=function(){var a=Io,b=Lo,c=[],d,e,f,g=this;for(f=0;f<this.b.length;f++)d=this.b[f],c.push({layerId:nl(d.layerId,d.layer),level:d.level,rowFilter:d.rowFilter!==B?d.rowFilter+\"\":B,rowFilterContext:d.rowFilterContext,columns:d.columns});e=[this.a.ka,this.a.fa,this.a.ja,this.a.ga,c];this.c=x.setTimeout(function(){(new fh(a,{message:[b,2,e]})).then(A(Mo,g),A(No,g))},1)};Go.prototype.send=Go.prototype.send;Go.prototype.cancel=function(){x.clearTimeout(this.c)};Go.prototype.cancel=Go.prototype.cancel;\nfunction Mo(a){var b,c;for(c=0;c<a.length;c++)b=new Rn(a[c].Rows,null,a[c].Meta),this.dispatchEvent(new sc(\"data\",b));this.dispatchEvent(new rc(\"end\"))}function No(a){this.dispatchEvent(new tc(\"error\",a))}var Io=\"pde\",Lo=\"pdeSearchRequestProvider\";function Oo(a,b,c){var d=this,e=b&&b.rowFilter,f=c.resultType,g=On;Oo.v.constructor.call(this,c);C(a,Ho,Oo,0);Fo(b,Oo,1,\"invalid layer config\");e?(c=La(b),c.rowFilter=e.toString()):c=La(b);delete c.layer;c.layerId=nl(b.layerId,b.layer);(new dh).jd(\"pde\",\"H.service.extension.worker.processor\");a=a.V().clone().O(Jo+\".\"+Ko).T({meta:1});(new fh(\"pde\",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,polylineClippingMode:f===g.POLYLINE,serverUrl:a.toString(),layerConfigs:[c]}]})).then(function(){d.I=\n!0;kg(d)},this.f)}w(Oo,Wn);u(\"H.service.extension.platformData.TileProvider\",Oo);Oo.prototype.N=function(a,b,c){a=new Sn(a,b,c);a.i=Po;return a};var Po=new We({strokeColor:\"transparent\",fillColor:\"transparent\",lineWidth:0,lineJoin:\"round\",lineCap:\"round\"});\nOo.prototype.c=function(a,b,c,d,e){var f=this,g=this.getTileKey(a,b,c),h,g=this.g.get(g),k={cancel:ic},l=!0,n,m=On;g&&(this.b===m.POLYLINE||this.b===m.POLYGON?g.uc()||(d(Jl.pop(this.tileSize),null),l=!1):(d(z),l=!1));l&&(n=Cl.setTimeout(function(){h=new fh(\"pde\",{message:[f.uid,1,[a,b,c]]});h.then(d,e)},500),k.cancel=function(){h?h.cancel():Cl.clearTimeout(n)});return k};Oo.prototype.requestInternal=Oo.prototype.c;Oo.prototype.F=function(){Oo.v.F.call(this);new fh(\"pde\",{message:[this.uid,3]})};\nOo.ResultType=On;function Ho(a){a=vl(wl.pde,a||{});Ho.v.constructor.call(this,a)}w(Ho,ul);u(\"H.service.extension.platformData.Service\",Ho);Ho.prototype.f=function(a,b,c,d,e){var f=\"text/plain\";if(!a)throw new D(this.f,0,a);if(!b)throw new D(this.f,1,b);if(!d)throw new D(this.f,3,b);if(!e)throw new D(this.f,4,b);a=this.V().clone().O(a+\".\"+b).T(c);b===Qo.JSON&&(f=\"application/json\");b=new Zg(f,a.toString());b.then(d,function(a){a.json().then(function(a){e(a.message)},function(){e(a.statusText)})});return b};\nHo.prototype.request=Ho.prototype.f;wl.pde={subDomain:\"pde\",path:\"1\"};var Jo=\"tiles\";Ho.EntryPoint={DOC_ATTRIBUTES:\"doc/attributes\",DOC_LAYER:\"doc/layer\",DOC_LAYERS:\"doc/layers\",DOC_MAPS:\"doc/maps\",DOC_INDEXES:\"doc/indexes\",SEARCH_BBOX:\"search/bbox\",SEARCH_CORRIDOR:\"search/corridor\",SEARCH_PROXIMITY:\"search/proximity\",SEARCH_QUADKEY:\"search/quadkey\",SERVICE_CONFIGURATION:\"serviceconfiguration\",STATIC:\"static\",TILE:\"tile\",TILES:Jo,FILE:\"file\",INDEX:\"index\"};\nvar Ko=\"json\",Qo={TXT:\"txt\",JSON:Ko,HTML:\"html\",BIN:\"bin\"};Ho.EntryPointType=Qo;Ho.prototype.i=function(a,b){var c=b&&b.resultType,d=new Oo(this,a,b),e,f=On;c==f.MARKER||c===f.DOM_MARKER?e=new Ng(d):e=new Hg(d);return e};Ho.prototype.createTileLayer=Ho.prototype.i;U.prototype.N=function(a){var b;b=vl(wl.pde,a||{});var c;c=\"\"+(b.path||\"\");c+=b.subDomain||\"\";c+=b.baseUrl?b.baseUrl.toString():\"\";b=Bl(c);c=this.a[\"pde\"+b];c||(c=this.aa(new Ho(a)),this.a[\"pde\"+b]=c);return c};\nU.prototype.getPlatformDataService=U.prototype.N;u(\"H.service.buildInfo\",function(){return Ug(\"mapsjs-service\",\"0.14.0\",\"f6bbc40\")});\n");